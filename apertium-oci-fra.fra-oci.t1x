<?xml version="1.0" encoding="UTF-8"?>
<transfer default="chunk">
  <section-def-cats>
    <def-cat n="det">
      <cat-item tags="det.*"/>
      <cat-item tags="predet.*"/>
    </def-cat>
    <def-cat n="detdef">
      <cat-item tags="det.def.*"/>
    </def-cat>
    <def-cat n="ce_det">
      <cat-item lemma="ce" tags="det.dem.*"/>
    </def-cat>

    <def-cat n="predet">
      <cat-item tags="predet.*"/>
    </def-cat>

    <def-cat n="nom">
      <cat-item tags="n.*"/>
    </def-cat>

    <def-cat n="np">
      <cat-item tags="np.*"/>
    </def-cat>
    <def-cat n="nptop">
      <cat-item tags="np.top.*"/>
      <cat-item tags="np.loc"/>
    </def-cat>
    <def-cat n="npal">
      <cat-item tags="np.al"/>
      <cat-item tags="np.al.*"/>
    </def-cat>

    <def-cat n="adj">
      <cat-item tags="adj.*"/>
    </def-cat>
    <def-cat n="adjec">
      <cat-item tags="adj.*"/>
      <cat-item tags="vblex.pp.*"/>
    </def-cat>

    <def-cat n="adv">
      <cat-item tags="adv"/>
    </def-cat>
    <def-cat n="advitg">
      <cat-item tags="adv.itg"/>
    </def-cat>
    <def-cat n="preadv">
      <cat-item tags="preadv"/>
    </def-cat>
    <def-cat n="adv_preadv">
      <cat-item tags="adv"/>
      <cat-item tags="preadv"/>
    </def-cat>
    <def-cat n="ne">
      <cat-item lemma="ne" tags="adv"/>
    </def-cat>
    <def-cat n="pas">
      <cat-item lemma="pas" tags="adv"/>
    </def-cat>
    <def-cat n="jamais_plus">
      <cat-item lemma="jamais" tags="adv"/>
      <cat-item lemma="plus" tags="adv"/>
      <cat-item lemma="guère" tags="adv"/>
      <cat-item lemma="pas du tout" tags="adv"/>
    </def-cat>
    <def-cat n="rien">
      <cat-item lemma="rien" tags="prn.*"/>
    </def-cat>
    <def-cat n="personne">
      <cat-item lemma="personne" tags="prn.*"/>
      <cat-item lemma="aucun" tags="prn.*"/>
    </def-cat>
    <def-cat n="jamais_plus_rien_personne">
      <cat-item lemma="jamais" tags="adv"/>
      <cat-item lemma="plus" tags="adv"/>
      <cat-item lemma="guère" tags="adv"/>
      <cat-item lemma="pas du tout" tags="adv"/>
      <cat-item lemma="rien" tags="prn.*"/>
      <cat-item lemma="personne" tags="prn.*"/>
      <cat-item lemma="aucun" tags="prn.*"/>
    </def-cat>
    <def-cat n="jamais_plus_rien">
      <cat-item lemma="jamais" tags="adv"/>
      <cat-item lemma="plus" tags="adv"/>
      <cat-item lemma="guère" tags="adv"/>
      <cat-item lemma="pas du tout" tags="adv"/>
      <cat-item lemma="rien" tags="prn.*"/>
      <cat-item lemma="aucun" tags="prn.*"/>
    </def-cat>
    <def-cat n="rien_personne">
      <cat-item lemma="rien" tags="prn.*"/>
      <cat-item lemma="personne" tags="prn.*"/>
      <cat-item lemma="aucun" tags="prn.*"/>
    </def-cat>
    <def-cat n="adv_rien_personne">
      <cat-item tags="adv"/>
      <cat-item lemma="rien" tags="prn.*"/>
      <cat-item lemma="personne" tags="prn.*"/>
      <cat-item lemma="aucun" tags="prn.*"/>
    </def-cat>
    <def-cat n="longtemps">
      <cat-item lemma="longtemps" tags="adv"/>
    </def-cat>
    <def-cat n="ci_adv">
      <cat-item lemma="ci" tags="adv"/>
    </def-cat>
    <def-cat n="la_adv">
      <cat-item lemma="là" tags="adv"/>
    </def-cat>
    <def-cat n="en_fait">
      <cat-item lemma="en fait" tags="adv"/>
    </def-cat>

    <def-cat n="prn">
      <cat-item tags="prn.*"/>
    </def-cat>
    <def-cat n="prnpro">
      <cat-item tags="prn.pro.*"/>
    </def-cat>
    <def-cat n="prnenc">
      <cat-item tags="prn.enc.*"/>
    </def-cat>
    <def-cat n="prnsubj">
      <cat-item lemma="je" tags="prn.tn.p1.mf.sg"/>
      <cat-item lemma="tu" tags="prn.tn.p2.mf.sg"/>
      <cat-item lemma="il" tags="prn.tn.p3.m.sg"/>
      <cat-item lemma="il" tags="prn.tn.p3.f.sg"/>
      <cat-item lemma="nous" tags="prn.tn.p1.mf.pl"/>
      <cat-item lemma="vous" tags="prn.tn.p2.mf.pl"/>
      <cat-item lemma="il" tags="prn.tn.p3.m.pl"/>
      <cat-item lemma="il" tags="prn.tn.p3.f.pl"/>
    </def-cat>
    <def-cat n="il">
      <cat-item lemma="il" tags="prn.tn.p3.m.sg"/>
    </def-cat>
    <def-cat n="il_elle">
      <cat-item lemma="il" tags="prn.tn.p3.m.sg"/>
      <cat-item lemma="il" tags="prn.tn.p3.f.sg"/>
    </def-cat>
    <def-cat n="on">
      <cat-item lemma="on" tags="prn.pro.ref.p3.mf.sp"/>
    </def-cat>
    <def-cat n="enprn">
      <cat-item lemma="en" tags="prn.*"/>
    </def-cat>
    <def-cat n="y">
      <cat-item lemma="y" tags="prn.pro.adv"/>
    </def-cat>
    <def-cat n="estceque">
      <cat-item lemma="est-ce que" tags="prn.*"/>
    </def-cat>
    <def-cat n="ce">
      <cat-item lemma="ce" tags="prn.*"/>
    </def-cat>
    <def-cat n="ça">
      <cat-item lemma="ça" tags="prn.*"/>
    </def-cat>

    <def-cat n="num">
      <cat-item tags="num"/>
      <cat-item tags="num.*"/>
    </def-cat>

    <def-cat n="num_premier"> <!-- per datas -->
      <cat-item tags="num"/>
      <cat-item tags="num.*"/>
      <cat-item lemma="1er" tags="adj.*"/>
      <cat-item lemma="premier" tags="adj.*"/>
    </def-cat>

    <def-cat n="pr">
      <cat-item tags="pr"/>
    </def-cat>
    <def-cat n="deprep">
      <cat-item lemma="de" tags="pr"/>
    </def-cat>
    <def-cat n="enprep">
      <cat-item lemma="en" tags="pr"/>
    </def-cat>

    <def-cat n="cnjcoo">
      <cat-item tags="cnjcoo"/>
    </def-cat>

    <def-cat n="cnjsub">
      <cat-item tags="cnjsub"/>
    </def-cat>
    <def-cat n="que_cnjsub">
      <cat-item lemma="que" tags="cnjsub"/>
    </def-cat>

    <def-cat n="cnjadv">
      <cat-item tags="cnjadv"/>
    </def-cat>

    <def-cat n="rel">
      <cat-item tags="rel.*"/>
    </def-cat>

    <def-cat n="verb">
      <cat-item tags="vblex.*"/>
      <cat-item tags="vbser.*"/>
      <cat-item tags="vbhaver.*"/>
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="verbconj">
      <cat-item tags="vblex.*.p1.*"/>
      <cat-item tags="vblex.*.p2.*"/>
      <cat-item tags="vblex.*.p3.*"/>
      <cat-item tags="vbhaver.*.p1.*"/>
      <cat-item tags="vbhaver.*.p2.*"/>
      <cat-item tags="vbhaver.*.p3.*"/>
      <cat-item tags="vbser.*.p1.*"/>
      <cat-item tags="vbser.*.p2.*"/>
      <cat-item tags="vbser.*.p3.*"/>
      <cat-item tags="vbmod.*.p1.*"/>
      <cat-item tags="vbmod.*.p2.*"/>
      <cat-item tags="vbmod.*.p3.*"/>
    </def-cat>

    <def-cat n="verbp3">
      <cat-item tags="vblex.*.p3.*"/>
      <cat-item tags="vbhaver.*.p3.*"/>
      <cat-item tags="vbser.*.p3.*"/>
      <cat-item tags="vbmod.*.p3.*"/>
    </def-cat>
    <def-cat n="devoirp3sg">
      <cat-item lemma="devoir" tags="vblex.*.p3.sg"/>
      <cat-item lemma="devoir" tags="vbmod.*.p3.sg"/>
    </def-cat>

    <def-cat n="vbser">
      <cat-item tags="vbser.*"/>
    </def-cat>

    <def-cat n="vbser_pp">
      <cat-item tags="vbser.pp.*"/>
    </def-cat>

    <def-cat n="vbhaver">
      <cat-item tags="vbhaver.*"/>
    </def-cat>

    <def-cat n="vbhaverconj">
      <cat-item tags="vbhaver.*.p1.*"/>
      <cat-item tags="vbhaver.*.p2.*"/>
      <cat-item tags="vbhaver.*.p3.*"/>
    </def-cat>

    <def-cat n="vbhaverinfger">
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbhaver.ger"/>
    </def-cat>

    <def-cat n="vbmod">
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="vbaux">
      <cat-item tags="vbser.*"/>
      <cat-item tags="vbhaver.*"/>
    </def-cat>

    <def-cat n="vbnoser">
      <cat-item tags="vblex.*"/>
      <cat-item tags="vbhaver.*"/>
      <cat-item tags="vbmod.*"/>
    </def-cat>

    <def-cat n="inf">
      <cat-item tags="vblex.inf"/>
      <cat-item tags="vblex.tv.inf"/>
      <cat-item tags="vbser.inf"/>
      <cat-item tags="vbhaver.inf"/>
      <cat-item tags="vbmod.inf"/>
    </def-cat>

    <def-cat n="ger">
      <cat-item tags="vblex.ger"/>
      <cat-item tags="vblex.tv.ger"/>
      <cat-item tags="vbser.ger"/>
      <cat-item tags="vbhaver.ger"/>
      <cat-item tags="vbmod.ger"/>
    </def-cat>

    <def-cat n="imp">
      <cat-item tags="vblex.imp.*"/>
      <cat-item tags="vblex.tv.imp.*"/>
      <cat-item tags="vbser.imp.*"/>
      <cat-item tags="vbhaver.imp.*"/>
      <cat-item tags="vbmod.imp.*"/>
    </def-cat>

    <def-cat n="pp">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.tv.pp.*"/>
      <cat-item tags="vbser.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
    </def-cat>

    <def-cat n="pp_no_ser">
      <cat-item tags="vblex.pp.*"/>
      <cat-item tags="vblex.tv.pp.*"/>
      <cat-item tags="vbhaver.pp.*"/>
      <cat-item tags="vbmod.pp.*"/>
    </def-cat>

    <def-cat n="cm">
      <cat-item tags="cm"/>
    </def-cat>
    <def-cat n="lpar">
      <cat-item tags="lpar"/>
    </def-cat>
    <def-cat n="rpar">
      <cat-item tags="rpar"/>
    </def-cat>
    <def-cat n="sent">
      <cat-item tags="sent"/>
    </def-cat>

    <def-cat n="train">
      <cat-item lemma="train" tags="n.*"/>
    </def-cat>

    <def-cat n="unite_temps">
      <cat-item lemma="seconde" tags="n.*"/>
      <cat-item lemma="minute" tags="n.*"/>
      <cat-item lemma="heure" tags="n.*"/>
      <cat-item lemma="jour" tags="n.*"/>
      <cat-item lemma="journée" tags="n.*"/>
      <cat-item lemma="semaine" tags="n.*"/>
      <cat-item lemma="mois" tags="n.*"/>
      <cat-item lemma="an" tags="n.*"/>
      <cat-item lemma="année" tags="n.*"/>
      <cat-item lemma="lustre" tags="n.*"/>
      <cat-item lemma="décennie" tags="n.*"/>
      <cat-item lemma="décade" tags="n.*"/>
      <cat-item lemma="siècle" tags="n.*"/>
      <cat-item lemma="millénaire" tags="n.*"/>
    </def-cat>

    <def-cat n="nom_mois">
      <cat-item lemma="janvier" tags="n.*"/>
      <cat-item lemma="février" tags="n.*"/>
      <cat-item lemma="mars" tags="n.*"/>
      <cat-item lemma="avril" tags="n.*"/>
      <cat-item lemma="mai" tags="n.*"/>
      <cat-item lemma="juin" tags="n.*"/>
      <cat-item lemma="juillet" tags="n.*"/>
      <cat-item lemma="août" tags="n.*"/>
      <cat-item lemma="septembre" tags="n.*"/>
      <cat-item lemma="octobre" tags="n.*"/>
      <cat-item lemma="novembre" tags="n.*"/>
      <cat-item lemma="décembre" tags="n.*"/>
    </def-cat>

  </section-def-cats>

  <section-def-attrs>
    <def-attr n="a_nom">
      <attr-item tags="n"/>
      <attr-item tags="n.acr"/>
      <attr-item tags="np.ant"/>
    </def-attr>

    <def-attr n="a_det">
      <attr-item tags="det.def"/>
      <attr-item tags="det.ind"/>
      <attr-item tags="det.dem"/>
      <attr-item tags="det.pos"/>
      <attr-item tags="predet"/>
    </def-attr>

    <def-attr n="a_det2">
      <attr-item tags="def"/>
      <attr-item tags="ind"/>
      <attr-item tags="dem"/>
      <attr-item tags="pos"/>
      <attr-item tags="predet"/>
    </def-attr>

    <def-attr n="a_adjec">
      <attr-item tags="adj.ind"/>
      <attr-item tags="adj.sup"/>
      <attr-item tags="adj.itg"/>
      <attr-item tags="adj.pos"/>
      <attr-item tags="adj"/>
      <attr-item tags="vblex.pp"/>
      <attr-item tags="vblex.tv.pp"/>
      <attr-item tags="vbhaver.pp"/>
      <attr-item tags="vbser.pp"/>
      <attr-item tags="vbmod.pp"/>
    </def-attr>

    <def-attr n="a_verb">
      <attr-item tags="vblex"/>
      <attr-item tags="vbser"/>
      <attr-item tags="vbhaver"/>
      <attr-item tags="vbmod"/>
    </def-attr>

    <def-attr n="a_num">
      <attr-item tags="num"/>
    </def-attr>

    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>

    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="mf"/>
      <attr-item tags="f"/>
      <attr-item tags="GD"/>
    </def-attr>

    <def-attr n="pers">
      <attr-item tags="p1"/>
      <attr-item tags="p2"/>
      <attr-item tags="p3"/>
    </def-attr>

    <def-attr n="temps">
      <attr-item tags="inf"/>
      <attr-item tags="ger"/>
      <attr-item tags="pp"/>
      <attr-item tags="pri"/>
      <attr-item tags="ifi"/>
      <attr-item tags="pii"/>
      <attr-item tags="fti"/>
      <attr-item tags="cni"/>
      <attr-item tags="prs"/>
      <attr-item tags="pis"/>
      <attr-item tags="fts"/>
      <attr-item tags="imp"/>
    </def-attr>

    <def-attr n="tv">
      <attr-item tags="tv"/>
    </def-attr>
  </section-def-attrs>

  <section-def-vars>
    <def-var n="lemma"/>
    <def-var n="number"/>
    <def-var n="numvist"/>
    <def-var n="varporque"/>
    <def-var n="tipusverb"/>
    <def-var n="tipusdet"/>
    <def-var n="tipusprn"/>
    <def-var n="uno"/>
    <def-var n="genero"/>
    <def-var n="numero"/>
    <def-var n="genero_sl"/>
    <def-var n="numero_sl"/>
    <def-var n="concDet"/>
    <def-var n="concAdj"/>
    <def-var n="concPrimero"/>
    <def-var n="concSegundo"/>
    <def-var n="concTercero"/>
    <def-var n="interrogativa"/>
    <def-var n="exclamativa"/>
    <def-var n="auxg"/>
    <def-var n="auxn"/>
    <def-var n="temp"/>
  </section-def-vars>

  <section-def-lists>
    <def-list n="mois">
      <list-item v="janvier"/>
      <list-item v="février"/>
      <list-item v="mars"/>
      <list-item v="avril"/>
      <list-item v="mai"/>
      <list-item v="juin"/>
      <list-item v="juillet"/>
      <list-item v="août"/>
      <list-item v="septembre"/>
      <list-item v="octobre"/>
      <list-item v="novembre"/>
      <list-item v="décembre"/>
    </def-list>

    <def-list n="l_jamais_plus_rien_personne">
      <list-item v="jamais"/>
      <list-item v="plus"/>
      <list-item v="guère"/>
      <list-item v="rien"/>
      <list-item v="personne"/>
      <list-item v="aucun"/>
    </def-list>

    <def-list n="verbs_amb_partitiu">
      <list-item v="aculhir"/>
      <list-item v="acuélher"/>
      <list-item v="agropar"/>
      <list-item v="apondre"/>
      <list-item v="aver"/>
      <list-item v="auer"/>
      <list-item v="acceptar"/>
      <list-item v="apelar"/>
      <list-item v="bailar"/>
      <list-item v="balhar"/>
      <list-item v="baliar"/>
      <list-item v="beure"/>
      <list-item v="béuer"/>
      <list-item v="comprar"/>
      <list-item v="conclure"/>
      <list-item v="conéisser"/>
      <list-item v="conéisher"/>
      <list-item v="cootrolar"/>
      <list-item v="cootrotlar"/>
      <list-item v="contusionar"/>
      <list-item v="convalidar"/>
      <list-item v="coovenir"/>
      <list-item v="coovidar"/>
      <list-item v="coovocar"/>
      <list-item v="coordinar"/>
      <list-item v="copar"/>
      <list-item v="cridar"/>
      <list-item v="crompar"/>
      <list-item v="desenvolopar"/>
      <list-item v="destinar"/>
      <list-item v="destruir"/>
      <list-item v="destrusir"/>
      <list-item v="determinar"/>
      <list-item v="develar"/>
      <list-item v="desvistar"/>
      <list-item v="dividir"/>
      <list-item v="divulgar"/>
      <list-item v="editar"/>
      <list-item v="esperar"/>
      <list-item v="èsser"/>
      <list-item v="encontrar"/>
      <list-item v="establir"/>
      <list-item v="evitar"/>
      <list-item v="ganhar"/>
      <list-item v="gropar"/>
      <list-item v="introdusir"/>
      <list-item v="introduire"/>
      <list-item v="mandar"/>
      <list-item v="manjar"/>
      <list-item v="manténer"/>
      <list-item v="memorizar"/>
      <list-item v="nomenar"/>
      <list-item v="recebre"/>
      <list-item v="regropar"/>
      <list-item v="reintrodusir"/>
      <list-item v="reintroduire"/>
      <list-item v="rencontrar"/>
      <list-item v="sonar"/>
      <list-item v="tranmetre"/>
      <list-item v="televizar"/>
      <list-item v="tuar"/>
<!--      <list-item v="utilizar"/> -->
<!--      <list-item v="vendre"/> -->
<!--      <list-item v="voler"/> -->
    </def-list>

    <def-list n="lang_dial">
      <list-item v="portugais"/>
      <list-item v="espagnol"/>
      <list-item v="catalan"/>
      <list-item v="valencien"/>
      <list-item v="majorquin"/>
      <list-item v="minorquin"/>
      <list-item v="ibizois"/>
      <list-item v="baléare"/>
      <list-item v="alguérois"/>
      <list-item v="roussillonnais"/>
      <list-item v="aragonais"/>
      <list-item v="asturien"/>
      <list-item v="léonais"/>
      <list-item v="mirandais"/>
      <list-item v="basque"/>
      <list-item v="castillan"/>
      <list-item v="espagnol"/>
      <list-item v="andalou"/>
      <list-item v="mozarabe"/>
      <list-item v="français"/>
      <list-item v="breton"/>
      <list-item v="normand"/>
      <list-item v="picard"/>
      <list-item v="alsacien"/>
      <list-item v="occitan"/>
      <list-item v="aranais"/>
      <list-item v="corse"/>
      <list-item v="auvergnat"/>
      <list-item v="limousin"/>
      <list-item v="gascon"/>
      <list-item v="béarnais"/>
      <list-item v="languedocien"/>
      <list-item v="provençal"/>
      <list-item v="niçois"/>
      <list-item v="savoyard"/>
      <list-item v="luxembourgeois"/>
      <list-item v="anglais"/>
      <list-item v="écossais"/>
      <list-item v="gallois"/>
      <list-item v="cornique"/>
      <list-item v="irlandais"/>
      <list-item v="mannois"/>
      <list-item v="wallon"/>
      <list-item v="flamand"/>
      <list-item v="hollandais"/>
      <list-item v="allemand"/>
      <list-item v="bavarois"/>
      <list-item v="danois"/>
      <list-item v="islandais"/>
      <list-item v="norvégien"/>
      <list-item v="suédois"/>
      <list-item v="finlandais"/>
      <list-item v="russe"/>
      <list-item v="tchétchène"/>
      <list-item v="abkhaze"/>
      <list-item v="ossète"/>
      <list-item v="tchouvache"/>
      <list-item v="tatare"/>
      <list-item v="bachkir"/>
      <list-item v="oudmourte"/>
      <list-item v="yakoute"/>
      <list-item v="iakoute"/>
      <list-item v="estonien"/>
      <list-item v="letton"/>
      <list-item v="lithuanien"/>
      <list-item v="balte"/>
      <list-item v="polonais"/>
      <list-item v="tchèque"/>
      <list-item v="slovake"/>
      <list-item v="hongrois"/>
      <list-item v="italien"/>
      <list-item v="sarde"/>
      <list-item v="sicilien"/>
      <list-item v="piémontais"/>
      <list-item v="napolitain"/>
      <list-item v="toscan"/>
      <list-item v="vénitien"/>
      <list-item v="frioulan"/>
      <list-item v="maltais"/>
      <list-item v="slovène"/>
      <list-item v="dalmatien"/>
      <list-item v="croate"/>
      <list-item v="serbe"/>
      <list-item v="bosnien"/>
      <list-item v="bosniaque"/>
      <list-item v="monténégrin"/>
      <list-item v="macédonien"/>
      <list-item v="roumain"/>
      <list-item v="moldave"/>
      <list-item v="bulgare"/>
      <list-item v="rom"/>
      <list-item v="romani"/>
      <list-item v="grec"/>
      <list-item v="béotien"/>
      <list-item v="ukrainien"/>
      <list-item v="biélorusse"/>
      <list-item v="moldave"/>
      <list-item v="turc"/>
      <list-item v="kurde"/>
      <list-item v="arménien"/>
      <list-item v="géorgien"/>
      <list-item v="azerbaïdjanais"/>
      <list-item v="kazakh"/>
      <list-item v="turkmène"/>
      <list-item v="ouzbek"/>
      <list-item v="kirghiz"/>
      <list-item v="tadjik"/>
      <list-item v="mongol"/>
      <list-item v="ouïghour"/>
      <list-item v="cachemiri"/>
      <list-item v="cachemirien"/>
      <list-item v="arabe"/>
      <list-item v="sarrasin"/>
      <list-item v="hébreu"/>
      <list-item v="juif"/>	<!-- ce n'est pas une langue, mais il faut enlever la majuscule, si elle y est -->
      <list-item v="amazigh"/>
      <list-item v="berbère"/>
      <list-item v="kabyle"/>
      <list-item v="touareg"/>
      <list-item v="bengali"/>
      <list-item v="bengalais"/>
      <list-item v="népalais"/>
      <list-item v="tibétain"/>
      <list-item v="chinois"/>
      <list-item v="cantonais"/>
      <list-item v="taïwanais"/>
      <list-item v="japonais"/>
      <list-item v="aïnou"/>
      <list-item v="coréen"/>
      <list-item v="vietnamien"/>
      <list-item v="thaïlandais"/>
      <list-item v="birman"/>
      <list-item v="laotien"/>
      <list-item v="malais"/>
      <list-item v="indonésien"/>
      <list-item v="javanais"/>
      <list-item v="taïwanais"/>
      <list-item v="hawaïen"/>
      <list-item v="tahitien"/>
      <list-item v="maori"/>
      <list-item v="éthiopien"/>
      <list-item v="somalien"/>
      <list-item v="malgache"/>
      <list-item v="zoulou"/>
      <list-item v="swazi"/>
      <list-item v="apache"/>
      <list-item v="algonquien"/>
      <list-item v="algonquin"/>
      <list-item v="chinook"/>
      <list-item v="esquimau"/>
      <list-item v="groenlandais"/>
      <list-item v="gaulois"/>
      <list-item v="ibère"/>
      <list-item v="étrusque"/>
      <list-item v="latin"/>
      <list-item v="troyen"/>
      <list-item v="perse"/>
      <list-item v="persan"/>
      <list-item v="baloutche"/>
      <list-item v="sumérien"/>
      <list-item v="akkadien"/>
      <list-item v="nabatéen"/>
      <list-item v="araméen"/>
    </def-list>

    <def-list n="nptop_amb_detdef">
      <list-item v="Africa subsahariana"/>
      <list-item v="America centrala"/>
      <list-item v="America del Nòrd"/>
      <list-item v="America del Sud"/>
      <list-item v="America latina"/>
      <list-item v="Bassa Normandia"/>
      <list-item v="Comtat Venaicin"/>
      <list-item v="Còsta d'Azur"/>
      <list-item v="Estats Units"/>
      <list-item v="Gran Bretanha"/>
      <list-item v="Guaiana"/>
      <list-item v="Güaiana"/>
      <list-item v="Illa de França"/>
      <list-item v="Ilha de França"/>
      <list-item v="Isla de França"/>
      <list-item v="Lanas"/>
      <list-item v="Léger Atlàntic"/>
      <list-item v="Naut Ren"/>
      <list-item v="Nauta Normandia"/>
      <list-item v="Nauta Savòia"/>
      <list-item v="Nauta Vinhana"/>
      <list-item v="Nauts de França"/>
      <list-item v="Nòu Brunswick"/>
      <list-item v="Nòu Hampshire"/>
      <list-item v="Nòu Mexic"/>
      <list-item v="Nòva Aquitània"/>
      <list-item v="Nòva Caledònia"/>
      <list-item v="Nòva Jersey"/>
      <list-item v="Nòva Zelanda"/>
      <list-item v="Païses Basses"/>
      <list-item v="País de Galas"/>
      <list-item v="Païses de Léger"/>
      <list-item v="Pas de Calais"/>
      <list-item v="Reialme Unit"/>
      <list-item v="Republica Chèca"/>
      <list-item v="Republica Dominicana"/>
      <list-item v="Territòri de Belfort"/>
      <list-item v="Union Europèa"/>
      <list-item v="UE"/>
      <list-item v="Union Sovietica"/>
      <list-item v="URSS"/>
      <list-item v="Val d'Aran"/>
      <list-item v="Val d'Oise"/>
      <list-item v="Val de Marna"/>

      <list-item v="Alps"/>
      <list-item v="Aups"/>
      <list-item v="Auts Aups"/>
      <list-item v="Aups Maritims"/>
      <list-item v="Aups d'Auta Provença"/>
      <list-item v="Andes"/>
      <list-item v="Ardenas"/>
      <list-item v="Carpats"/>
      <list-item v="Massís Central"/>
      <list-item v="Orals"/>
      <list-item v="Pirenèu"/>
      <list-item v="Pirenèus"/>
      <list-item v="Hauts Pirenèus"/>
      <list-item v="Pirenèus Atlantics"/>
      <list-item v="Pirenèus Orientals"/>
      <list-item v="Sèlva Negra"/>
      <list-item v="Termopilas"/>
      <list-item v="Vòges"/>
      <list-item v="Mont Blanc"/>

      <list-item v="Mediterrànea"/>
      <list-item v="mar Baltica"/>
      <list-item v="mar Mòrta"/>
      <list-item v="mar d'Aral"/>
      <list-item v="mar de Japon"/>
      <list-item v="mar de las Antilhas"/>
      <list-item v="mar del Nôrd"/>
      <list-item v="mar del Coralh"/>

      <list-item v="Antilhas"/>
      <list-item v="Antilhes"/>
      <list-item v="Balearas"/>
      <list-item v="Baleares"/>
      <list-item v="Canàrias"/>
      <list-item v="Canàries"/>
      <list-item v="Filipinas"/>
      <list-item v="Filipines"/>
      <list-item v="illa de Clipperton"/>
      <list-item v="Illa de França"/>
      <list-item v="Illa de Man"/>
      <list-item v="Illa de Pascas"/>
      <list-item v="illas Australas"/>
      <list-item v="illas Caiman"/>
      <list-item v="illas Chatham"/>
      <list-item v="illas de Pitcairn"/>
      <list-item v="illas Malvinas"/>
      <list-item v="illas Marquesas"/>
      <list-item v="illas Marshall"/>
      <list-item v="illas Midway"/>
      <list-item v="illas Tokelau"/>
      <list-item v="illas Tuamotu"/>
      <list-item v="illas Turcas e Caïcas"/>
      <list-item v="Illas Verges Americanas"/>
      <list-item v="Illas Verges Britanicas"/>
      <list-item v="Illas Verges"/>
      <list-item v="illas Toquelau"/>


      <list-item v="Acropòli"/>
      <list-item v="Camp Nou"/>
      <list-item v="Santiago Bernabeu"/>
    </def-list>

  </section-def-lists>

  <section-def-macros>
    <def-macro n="test" npar="1">
          <let>
            <var n="number"/>
            <lit v=""/>
          </let>
    </def-macro>

    <def-macro n="f_concord_pedac2" npar="2">
<!--Pedaç ad-hoc per solucionar problemes amb l'assignació del nombre a "nombreux prix" et sim. -->
      <choose>
        <when>
          <test>
            <and>
              <equal><clip pos="2" side="sl" part="lem"/><lit v="nombreux"/></equal>
              <equal><clip pos="1" side="sl" part="gen"/><lit-tag v="m"/></equal>
              <equal><clip pos="1" side="sl" part="nbr"/><lit-tag v="sp"/></equal>
              <equal><clip pos="1" side="tl" part="nbr"/><lit-tag v="ND"/></equal>
            </and>
          </test>
          <let><clip pos="2" side="tl" part="nbr"/><lit-tag v="pl"/></let>
          <let><clip pos="1" side="tl" part="nbr"/><lit-tag v="pl"/></let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_concord0" npar="1">
      <choose>
<!--To determine value of variables of gender and
                 number and propagate to other rules.  Variables are
                 not used again in this rule -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_concord1" npar="1">
      <call-macro n="f_concord0"><with-param pos="1"/></call-macro>
      <choose>
        <when>
          <test>
<!-- If word has GD or ND, we try to assign the
              gender or number of the previous rule. If there is no
              value for the gender or number variable from previous
              rules, gender will be masculine and number singular.-->
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="genero"/>
                  <lit-tag v="f"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="f"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="m"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <choose>
            <when>
              <test>
                <equal>
                  <var n="numero"/>
                  <lit-tag v="pl"/>
                </equal>
              </test>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="pl"/>
              </let>
            </when>
            <otherwise>
              <let>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sg"/>
              </let>
            </otherwise>
          </choose>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_concord2" npar="2">

      <call-macro n="f_concord_pedac2">
        <with-param pos="1"/>
        <with-param pos="2"/>
      </call-macro>

      <choose>
        <when>
          <test>
<!-- do the main and second parameter gender agree?-->
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
<!-- do the main and second parameter number agree?-->
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
<!-- there is gender and number agreement-->
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
<!-- there isn't gender and number agreement-->
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
<!-- Propagate the main parameter gender if it has been modified during the translation  -->
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
<!-- Propagate the main parameter number if it has been modified during the translation  -->
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
<!-- Which is the rule general gender? -->
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
<!-- Which is the rule general number? -->
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>

        <when>
          <test>
            <and>
            <equal>
              <clip pos="2" side="tl" part="a_num"/>
              <lit-tag v="num"/>
            </equal>
            <not>
            <equal>
              <clip pos="2" side="tl" part="lem"/>
              <lit v="1"/>
            </equal>
            </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>

        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="2" side="sl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Determine gender and number value if they are undetermined -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_concord3" npar="3">
      <choose>
<!-- Look whether in source language there is concordance between first and second element -->
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Look whether in source language there is concordance between second and third element -->
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concSegundo"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concSegundo"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Propagate the main parameter gender if it has been modified during the translation -->
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
<!-- Propagate the main parameter number if it has been modified during the translation -->
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
<!-- Determine the rule general gender. Priority order: main, second and third element -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="1" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="2" side="sl" part="gen"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="3" side="tl" part="gen"/>
                <lit-tag v="mf"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="genero"/>
            <clip pos="3" side="sl" part="gen"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Determine the rule general number. Priority order: main, second and third element -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="1" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="1" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="2" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="2" side="sl" part="nbr"/>
          </let>
        </when>
        <when>
          <test>
            <and>
              <equal>
                <clip pos="3" side="tl" part="nbr"/>
                <lit-tag v="sp"/>
              </equal>
              <not>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
            </and>
          </test>
          <let>
            <var n="numero"/>
            <clip pos="3" side="sl" part="nbr"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
      <choose>
<!-- Assign values to GD and ND -->
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_concord4" npar="4">
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="2" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concPrimero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concPrimero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="3" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concSegundo"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concSegundo"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </or>
              <or>
                <equal>
                  <clip pos="4" side="sl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
                <equal>
                  <clip pos="4" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
                <equal>
                  <clip pos="1" side="sl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </or>
            </and>
          </test>
          <let>
            <var n="concTercero"/>
            <lit v="true"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="concTercero"/>
            <lit v="false"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <clip pos="1" side="sl" part="gen"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="mf"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="gen"/>
                  <lit-tag v="GD"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="4" side="tl" part="gen"/>
                      <lit-tag v="mf"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="4" side="sl" part="gen"/>
                        <lit-tag v="mf"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="4" side="tl" part="gen"/>
                          <lit-tag v="GD"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concTercero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="4" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="gen"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <and>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <clip pos="1" side="sl" part="nbr"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="sp"/>
                </equal>
              </not>
              <not>
                <equal>
                  <clip pos="1" side="tl" part="nbr"/>
                  <lit-tag v="ND"/>
                </equal>
              </not>
            </and>
          </test>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="2" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="2" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="2" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concPrimero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="3" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="3" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="3" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concSegundo"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="3" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
          <choose>
            <when>
              <test>
                <and>
                  <not>
                    <equal>
                      <clip pos="4" side="tl" part="nbr"/>
                      <lit-tag v="sp"/>
                    </equal>
                  </not>
                  <not>
                    <and>
                      <equal>
                        <clip pos="4" side="sl" part="nbr"/>
                        <lit-tag v="sp"/>
                      </equal>
                      <not>
                        <equal>
                          <clip pos="4" side="tl" part="nbr"/>
                          <lit-tag v="ND"/>
                        </equal>
                      </not>
                    </and>
                  </not>
                  <equal>
                    <var n="concTercero"/>
                    <lit v="true"/>
                  </equal>
                </and>
              </test>
              <let>
                <clip pos="4" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="nbr"/>
              </let>
            </when>
          </choose>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="m"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="f"/>
            </equal>
          </test>
          <let>
            <var n="genero"/>
            <lit-tag v="f"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="genero"/>
            <lit-tag v="m"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="sg"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </when>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="pl"/>
            </equal>
          </test>
          <let>
            <var n="numero"/>
            <lit-tag v="pl"/>
          </let>
        </when>
        <otherwise>
          <let>
            <var n="numero"/>
            <lit-tag v="sg"/>
          </let>
        </otherwise>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="gen"/>
              <lit-tag v="GD"/>
            </equal>
          </test>
          <let>
            <clip pos="4" side="tl" part="gen"/>
            <var n="genero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="1" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="1" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="2" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="2" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="3" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="3" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal>
              <clip pos="4" side="tl" part="nbr"/>
              <lit-tag v="ND"/>
            </equal>
          </test>
          <let>
            <clip pos="4" side="tl" part="nbr"/>
            <var n="numero"/>
          </let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_chunk_tags" npar="1">
      <choose>
        <when>
          <test>
            <equal><clip pos="1" side="sl" part="gen"/><lit-tag v="m"/></equal>
          </test>
          <let><var n="genero_sl"/><lit-tag v="sl_m"/></let>
        </when>
        <when>
          <test>
            <equal><clip pos="1" side="sl" part="gen"/><lit-tag v="f"/></equal>
          </test>
          <let><var n="genero_sl"/><lit-tag v="sl_f"/></let>
        </when>
        <when>
          <test>
            <equal><clip pos="1" side="sl" part="gen"/><lit-tag v="mf"/></equal>
          </test>
          <let><var n="genero_sl"/><lit-tag v="sl_mf"/></let>
        </when>
      </choose>
      <choose>
        <when>
          <test>
            <equal><clip pos="1" side="sl" part="nbr"/><lit-tag v="sg"/></equal>
          </test>
          <let><var n="numero_sl"/><lit-tag v="sl_sg"/></let>
        </when>
        <when>
          <test>
            <equal><clip pos="1" side="sl" part="nbr"/><lit-tag v="pl"/></equal>
          </test>
          <let><var n="numero_sl"/><lit-tag v="sl_pl"/></let>
        </when>
        <when>
          <test>
            <equal><clip pos="1" side="sl" part="nbr"/><lit-tag v="sp"/></equal>
          </test>
          <let><var n="numero_sl"/><lit-tag v="sl_sp"/></let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="tipus_verb" npar="1"> <!-- tots els verbs passen per aqui -->
      <choose>
        <when>
          <test>
          <or>
            <equal>
             <clip pos="1" side="tl" part="tv"/><lit-tag v="tv"/>
            </equal>
            <in caseless="yes">
             <clip pos="1" side="tl" part="lemh"/>
             <list n="verbs_amb_partitiu"/>
            </in>
          </or>
          </test>
          <let><var n="tipusverb"/><lit-tag v="partitiu"/></let>
        </when>
        <otherwise>
          <let><var n="tipusverb"/><lit-tag v="normal"/></let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="tipus_det" npar="1"> <!-- tots els det passen per aqui -->
      <choose>
        <when>
          <test>
            <equal caseless="yes">
             <clip pos="1" side="sl" part="lem"/><lit v="aucun"/>
            </equal>
          </test>
          <let><var n="tipusdet"/><lit-tag v="aucun"/></let>
        </when>
        <otherwise>
          <let><var n="tipusdet"/><clip pos="1" side="sl" part="a_det2"/></let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="tipus_prn" npar="1"> <!-- tots els prn passen per aqui -->
      <choose>
        <when>
          <test>
            <equal caseless="yes">
             <clip pos="1" side="sl" part="lem"/><lit v="se"/>
            </equal>
          </test>
          <let><var n="tipusprn"/><lit-tag v="ref"/></let>
        </when>
        <otherwise>
          <let><var n="tipusverb"/><lit-tag v="normal"/></let>
        </otherwise>
      </choose>
    </def-macro>

    <def-macro n="neg_imp" npar="1"> <!-- canvia imp per prs (negació) -->
      <choose>
        <when>
          <test>
            <equal><clip pos="1" side="sl" part="temps"/><lit-tag v="imp"/></equal>
          </test>
          <let><clip pos="1" side="tl" part="temps"/><lit-tag v="prs"/></let>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_maj_gentilici" npar="1">
<!-- si es tracta d'un gentilici, traiem la majúscula -->
<!-- p1 = det, p2 = n -->
      <choose>
        <when>
          <test>
            <and>
              <in caseless="yes">
                <clip pos="1" side="sl" part="lem"/>
                <list n="lang_dial"/>
              </in>
              <equal>
                <case-of pos="1" side="sl" part="lem"/>
                <lit v="Aa"/>
              </equal>
            </and>
          </test>
          <modify-case>
            <clip pos="1" side="tl" part="lemh"/>
            <lit v="aa"/>
          </modify-case>
        </when>
      </choose>
    </def-macro>

    <def-macro n="f_bcond" npar="2"><!--Per mirar si el blanc conté o no format. Cal posar aquesta funció en les regles en què desaparegui alguna paraula, per tal de decidir si el blanc de la paraula eliminada s'ha d'eliminar o conservar. Si conté format cal conservar-la, si no en conté cal eliminar-la perquè no apareguin dos espais seguits. -->
      <choose>
        <when>
          <test>
            <not>
              <equal>
                <b pos="1"/>
                <lit v=" "/>
              </equal>
            </not>
          </test>
          <out>
            <b pos="1"/>
          </out>
        </when>
      </choose>
    </def-macro>

  </section-def-macros>

  <section-rules>

    <!-- REGLAS CAPÇALERA CHUNK + LEMH/LEMQ -->

    <rule comment="REGLA: DET">
       <pattern>
         <pattern-item n="det"/>
       </pattern>
       <action>
         <call-macro n="f_concord1">
           <with-param pos="1"/>
         </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
         <out>
           <chunk name="det">
             <tags>
               <tag><lit-tag v="Det"/></tag>
               <tag><var n="tipusdet"/></tag>
               <tag><clip pos="1" side="tl" part="gen"/></tag>
               <tag><clip pos="1" side="tl" part="nbr"/></tag>
               <tag><var n="genero_sl"/></tag>
               <tag><var n="numero_sl"/></tag>
            </tags>
           <lu>
             <clip pos="1" side="tl" part="lemh"/>
             <clip pos="1" side="tl" part="tags"/>
             <clip pos="1" side="tl" part="lemq"/>
           </lu>
         </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NOM">
      <pattern>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: NP">
      <pattern>
        <pattern-item n="np"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="np">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: ADJ">
      <pattern>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when> <!-- <e><p><l>II<s n="num"/><s n="mf"/><s n="sp"/></l><r>IIe<s n="adj"/><s n="mf"/><s n="sg"/></r></p></e> -->
            <test>
              <equal>
                <clip pos="1" side="tl" part="a_num"/><lit-tag v="num"/>
              </equal>
            </test>
            <out>
             <chunk name="num">
               <tags>
                 <tag><lit-tag v="Num"/></tag>
               </tags>
              <lu>
                <clip pos="1" side="tl" part="whole"/>
              </lu>
             </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="a">
                <tags>
                  <tag><lit-tag v="SA"/></tag>
                  <tag><clip pos="1" side="tl" part="gen"/></tag>
                  <tag><clip pos="1" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_adjec"/>
                  <lit-tag v="2"/>
                  <lit-tag v="3"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="REGLA: pp">
      <pattern>
        <pattern-item n="pp"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="pp">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="a_verb"/>
              <clip pos="1" side="tl" part="temps"/>
              <lit-tag v="2"/>
              <lit-tag v="3"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: ADV">
      <pattern>
        <pattern-item n="adv_preadv"/>
      </pattern>
      <action>
        <let><var n="lemma"/><clip pos="1" side="tl" part="lem"/></let>
        <out>
          <chunk namefrom="lemma">
            <tags>
              <tag><lit-tag v="SAdv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: PREADV ADV (empaquetament en un sol chunk per t2x)">
      <pattern>
        <pattern-item n="preadv"/>
        <pattern-item n="adv"/>
      </pattern>
      <action>
        <out>
          <chunk name="preadv_adv">
            <tags>
              <tag><lit-tag v="SAdv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: PRN">
       <pattern>
         <pattern-item n="prn"/>
       </pattern>
       <action>
         <call-macro n="f_concord1">
           <with-param pos="1"/>
         </call-macro>
         <call-macro n="tipus_prn">
           <with-param pos="1"/>
         </call-macro>
         <choose>
           <when>
             <test>
               <not>
                 <equal caseless="yes">
                   <clip pos="1" side="sl" part="lem"/><lit v="est-ce que"/>
                 </equal>
               </not>
             </test>
             <out>
               <chunk name="prn">
                 <tags>
                   <tag><lit-tag v="SPron"/></tag>
                   <tag><var n="tipusprn"/></tag>
                 </tags>
                 <lu>
                   <clip pos="1" side="tl" part="lemh"/>
                   <clip pos="1" side="tl" part="tags"/>
                   <clip pos="1" side="tl" part="lemq"/>
                 </lu>
               </chunk>
             </out>
           </when>
         </choose>
       </action>
    </rule>


    <rule comment="REGLA: NUMERAL">
      <pattern>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
         <chunk name="num">
           <tags>
             <tag><lit-tag v="Num"/></tag>
           </tags>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
         </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: PREP">
      <pattern>
        <pattern-item n="pr"/>
      </pattern>
      <action>
       <choose>
          <when>
            <test><equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="de"/></equal></test>
            <out>
              <chunk name="pr">
                <tags>
                  <tag><lit-tag v="PREP"/></tag>
                  <tag><lit-tag v="de"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="pr">
                <tags>
                  <tag><lit-tag v="PREP"/></tag>
                  <tag><lit-tag v="pr"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
       </choose>
      </action>
    </rule>

    <rule comment="REGLA: CNJCOO">
      <pattern>
        <pattern-item n="cnjcoo"/>
      </pattern>
      <action>
        <out>
          <chunk name="cnjcoo">
            <tags>
              <tag><lit-tag v="cnjcoo"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: CNJSUB">
      <pattern>
        <pattern-item n="cnjsub"/>
      </pattern>
      <action>
        <out>
          <chunk name="cnjsub">
            <tags>
              <tag><lit-tag v="cnjsub"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: CNJADV">
      <pattern>
        <pattern-item n="cnjadv"/>
      </pattern>
      <action>
        <out>
          <chunk name="cnjadv">
            <tags>
              <tag><lit-tag v="cnjadv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: RELATIF">
      <pattern>
        <pattern-item n="rel"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
         <chunk name="d">
           <tags>
             <tag><lit-tag v="Rel"/></tag>
           </tags>
          <lu>
            <clip pos="1" side="tl" part="whole"/>
          </lu>
         </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: VBSER">
       <pattern>
         <pattern-item n="vbser"/>
       </pattern>
       <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <clip pos="1" side="tl" part="lemh"/>
               <clip pos="1" side="tl" part="tags"/>
               <clip pos="1" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: VBNOSER">
       <pattern>
         <pattern-item n="vbnoser"/>
       </pattern>
       <action>
        <call-macro n="tipus_verb">
          <with-param pos="1"/>
        </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="1" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <clip pos="1" side="tl" part="lemh"/>
               <clip pos="1" side="tl" part="a_verb"/>
               <clip pos="1" side="tl" part="temps"/>
               <clip pos="1" side="tl" part="pers"/>
               <clip pos="1" side="tl" part="nbr"/>
               <clip pos="1" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <!-- FIN REGLAS CAPÇALERA CHUNK + LEMH/LEMQ -->

    <!-- REGLAS CONCORDANÇA -->

    <rule comment="REGLA: DET NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="Det"/></tag>
              <tag><var n="tipusdet"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DET ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
       <choose>
          <when>
            <test>
              <or>
                <equal><clip pos="1" side="tl" part="gen"/><lit-tag v="mf"/></equal>
                <equal><clip pos="2" side="tl" part="gen"/><lit-tag v="mf"/></equal>
                <equal><clip pos="2" side="tl" part="nbr"/><lit-tag v="sp"/></equal>
              </or>
            </test>
            <out>
              <chunk name="det">
                <tags>
                  <tag><lit-tag v="Det"/></tag>
                  <tag><var n="tipusdet"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="tags"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det">
                <tags>
                  <tag><lit-tag v="Det"/></tag>
                  <tag><var n="tipusdet"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <out>
          <b pos="1"/>
          <chunk name="a">
            <tags>
              <tag><lit-tag v="SA"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="a_adjec"/>
              <lit-tag v="2"/>
              <lit-tag v="3"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DET NPAL (les Calandretas > las Calandretas)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="npal"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="Det"/></tag>
              <tag><var n="tipusdet"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="np">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DET ADV ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
       <choose>
          <when>
            <test>
              <or>
                <equal><clip pos="1" side="tl" part="gen"/><lit-tag v="mf"/></equal>
                <equal><clip pos="3" side="tl" part="gen"/><lit-tag v="mf"/></equal>
                <equal><clip pos="3" side="tl" part="nbr"/><lit-tag v="sp"/></equal>
              </or>
            </test>
            <out>
              <chunk name="det">
                <tags>
                  <tag><lit-tag v="Det"/></tag>
                  <tag><var n="tipusdet"/></tag>
                  <tag><clip pos="3" side="tl" part="gen"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="tags"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det">
                <tags>
                  <tag><lit-tag v="Det"/></tag>
                  <tag><var n="tipusdet"/></tag>
                  <tag><clip pos="3" side="tl" part="gen"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="a_det"/>
                  <lit-tag v="3"/>
                  <lit-tag v="4"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
        <choose>
          <when>
            <test>
              <or>
                <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="plus"/></equal>
                <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="moins"/></equal>
              </or>
            </test>
            <let><var n="temp"/><lit-tag v="SAcomp"/></let>
          </when>
          <otherwise>
            <let><var n="temp"/><lit-tag v="SA"/></let>
          </otherwise>
        </choose>
        <out>
          <b pos="1"/>
          <chunk name="adv_a">
            <tags>
              <tag><var n="temp"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="a_adjec"/>
              <lit-tag v="2"/>
              <lit-tag v="3"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DET NOM ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="Det"/></tag>
              <tag><var n="tipusdet"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="n_a">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: DET ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <and>
                <or>
                  <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="1er"/></equal>
                  <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="premier"/></equal>
                </or>
                <in caseless="yes">
                  <clip pos="3" side="sl" part="lem"/>
                  <list n="mois"/>
                </in>
              </and>
            </test>
            <out>
              <chunk name="data">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="tl" part="gen"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="de"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="tags"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <when>
            <test>
              <and>
                <or>
                  <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="siècle"/></equal>
                  <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="millennaire"/></equal>
                </or>
                <equal><clip pos="2" side="sl" part="gen"/><lit-tag v="mf"/></equal>
              </and>
            </test>
            <out>
              <chunk name="det">
                <tags>
                  <tag><lit-tag v="Det"/></tag>
                  <tag><var n="tipusdet"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="tags"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="n_num">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="tl" part="gen"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="tags"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="tags"/>
                  <clip pos="2" side="tl" part="lemg"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det">
                <tags>
                  <tag><lit-tag v="Det"/></tag>
                  <tag><var n="tipusdet"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="tags"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="a_n">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="tl" part="gen"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="tags"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="tags"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="REGLA: DET NUM NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <list n="mois"/>
              </in>
            </test>
            <out>
              <chunk name="data">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="tl" part="gen"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="whole"/>
                </lu>
                <b pos="2"/>
                <lu>
                  <lit v="de"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="3" side="tl" part="lemh"/>
                  <clip pos="3" side="tl" part="tags"/>
                  <clip pos="3" side="tl" part="lemq"/>
                </lu>
              </chunk>
              </out>
          </when>
          <otherwise>
            <out>
              <chunk name="det">
                <tags>
                  <tag><lit-tag v="Det"/></tag>
                  <tag><var n="tipusdet"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="tags"/>
                  <clip pos="1" side="tl" part="lemq"/>
                </lu>
              </chunk>
              <b pos="1"/>
              <chunk name="num_n">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="3" side="tl" part="gen"/></tag>
                  <tag><clip pos="3" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="tags"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                  <b pos="2"/>
                  <lu>
                    <clip pos="3" side="tl" part="lemh"/>
                    <clip pos="3" side="tl" part="tags"/>
                    <clip pos="3" side="tl" part="lemq"/>
                  </lu>
                </chunk>
             </out>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="REGLA: DET NOM ADJ ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="Det"/></tag>
              <tag><var n="tipusdet"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="n_a_a">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="tl" part="tags"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: DET ADJ NOM ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="Det"/></tag>
              <tag><var n="tipusdet"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="a_n_a">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="tl" part="tags"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: DET NUM NOM ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="Det"/></tag>
              <tag><var n="tipusdet"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="num_n_a">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="tl" part="tags"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: DET NOM ADV ADJ">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="Det"/></tag>
              <tag><var n="tipusdet"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="n_adv_a">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="tl" part="tags"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: DET ADV ADJ NOM">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="4"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="Det"/></tag>
              <tag><var n="tipusdet"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="adv_a_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="4" side="tl" part="gen"/></tag>
              <tag><clip pos="4" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
              <b pos="3"/>
              <lu>
                <clip pos="4" side="tl" part="lemh"/>
                <clip pos="4" side="tl" part="tags"/>
                <clip pos="4" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: PREDET DET NOM">
      <pattern>
        <pattern-item n="predet"/>
        <pattern-item n="det"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="d_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="tags"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="n_a">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="a_nom"/>
                <clip pos="1" side="tl" part="gen"/>
                <clip pos="1" side="tl" part="nbr"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="a_adjec"/>
                <clip pos="2" side="tl" part="gen"/>
                <clip pos="2" side="tl" part="nbr"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: ADJ NOM">
      <pattern>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <and>
                <or>
                  <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="1er"/></equal>
                  <equal caseless="yes"><clip pos="1" side="sl" part="lem"/><lit v="premier"/></equal>
                </or>
                <in caseless="yes">
                  <clip pos="2" side="sl" part="lem"/>
                  <list n="mois"/>
                </in>
              </and>
            </test>
            <out>
              <chunk name="data">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="de"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="tags"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <when>
            <test>
              <and>
                <or>
                  <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="siècle"/></equal>
                  <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="millénaire"/></equal>
                </or>
                <equal><clip pos="1" side="sl" part="gen"/><lit-tag v="mf"/></equal>
              </and>
            </test>
            <out>
              <chunk name="n_num">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="tags"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="1" side="tl" part="lemh"/>
                  <clip pos="1" side="tl" part="tags"/>
                  <clip pos="1" side="tl" part="lemg"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <out>
              <chunk name="a_n">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                  <lu>
                    <clip pos="1" side="tl" part="lemh"/>
                    <clip pos="1" side="tl" part="tags"/>
                    <clip pos="1" side="tl" part="lemq"/>
                  </lu>
                  <b pos="1"/>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="tags"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </chunk>
             </out>
           </otherwise>
         </choose>
      </action>
    </rule>

    <rule comment="REGLA: NUM NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="2" side="sl" part="lem"/>
                <list n="mois"/>
              </in>
            </test>
            <out>
              <chunk name="data">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <lit v="de"/>
                  <lit-tag v="pr"/>
                </lu>
                <b/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="tags"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
              </out>
          </when>
          <otherwise>
            <out>
              <chunk name="num_n">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                  <lu>
                    <clip pos="1" side="tl" part="lemh"/>
                    <clip pos="1" side="tl" part="tags"/>
                    <clip pos="1" side="tl" part="lemq"/>
                  </lu>
                  <b pos="1"/>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="tags"/>
                    <clip pos="2" side="tl" part="lemq"/>
                  </lu>
                </chunk>
             </out>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADJ ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="n_a_a">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="tags"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: ADJ NOM ADJ">
      <pattern>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="a_n_a">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="tags"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: NUM NOM ADJ">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="nom"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="num_n_a">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="tags"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: NUM ADJ NOM">
      <pattern>
        <pattern-item n="num"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="num_a_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="tags"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: NOM ADV ADJ">
      <pattern>
        <pattern-item n="nom"/>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="n_adv_a">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="1" side="tl" part="gen"/></tag>
              <tag><clip pos="1" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="tags"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: ADV ADJ NOM">
      <pattern>
        <pattern-item n="adv_preadv"/>
        <pattern-item n="adjec"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="adv_a_n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
              <lu>
                <clip pos="1" side="tl" part="lemh"/>
                <clip pos="1" side="tl" part="tags"/>
                <clip pos="1" side="tl" part="lemq"/>
              </lu>
              <b pos="1"/>
              <lu>
                <clip pos="2" side="tl" part="lemh"/>
                <clip pos="2" side="tl" part="tags"/>
                <clip pos="2" side="tl" part="lemq"/>
              </lu>
              <b pos="2"/>
              <lu>
                <clip pos="3" side="tl" part="lemh"/>
                <clip pos="3" side="tl" part="tags"/>
                <clip pos="3" side="tl" part="lemq"/>
              </lu>
            </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: EN NOM (en français: en francés - perquè no faci ´en francesa')">
      <pattern>
        <pattern-item n="enprep"/>
        <pattern-item n="nom"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
              <equal><clip pos="2" side="tl" part="gen"/><lit-tag v="GD"/></equal>
            </test>
            <let><clip pos="2" side="tl" part="gen"/><lit-tag v="m"/></let>
          </when>
        </choose>
        <choose>
          <when>
            <test>
              <equal><clip pos="2" side="tl" part="nbr"/><lit-tag v="ND"/></equal>
            </test>
            <let><clip pos="2" side="tl" part="nbr"/><lit-tag v="sg"/></let>
          </when>
        </choose>
        <out>
          <chunk name="en_n">
            <tags>
              <tag><lit-tag v="SAdv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: EN NOM ADJ">
      <pattern>
        <pattern-item n="enprep"/>
        <pattern-item n="nom"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <choose>
          <when>
            <test>
              <equal><clip pos="2" side="tl" part="gen"/><lit-tag v="GD"/></equal>
            </test>
            <let><clip pos="2" side="tl" part="gen"/><lit-tag v="m"/></let>
          </when>
        </choose>
        <choose>
          <when>
            <test>
              <equal><clip pos="2" side="tl" part="nbr"/><lit-tag v="ND"/></equal>
            </test>
            <let><clip pos="2" side="tl" part="nbr"/><lit-tag v="sg"/></let>
          </when>
        </choose>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="en_n_adj">
            <tags>
              <tag><lit-tag v="SAdv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="tags"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <!-- FIN REGLAS CONCORDANÇA -->

    <!-- REGLAS -CI/-LÀ -->

    <rule comment="REGLA: CE NOM CI (cette fois-ci > aqueste còp)">
      <pattern>
        <pattern-item n="ce_det"/>
        <pattern-item n="nom"/>
        <pattern-item n="ci_adv"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <let><clip pos="1" side="tl" part="lem"/><lit v="aqueste"/></let>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="Det"/></tag>
              <tag><var n="tipusdet"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: CE NOM LÀ (cette fois-là > aquel còp)">
      <pattern>
        <pattern-item n="ce_det"/>
        <pattern-item n="nom"/>
        <pattern-item n="la_adv"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_maj_gentilici">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="det">
            <tags>
              <tag><lit-tag v="Det"/></tag>
              <tag><var n="tipusdet"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
          <b pos="1"/>
          <chunk name="n">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <!-- FIN REGLAS -CI/-LÀ -->

    <!-- REGLAS TOP -->

    <rule comment="REGLA: DETDEF NPTOP (la France > França, les États-Unis > los Estats Units)">
      <pattern>
        <pattern-item n="detdef"/>
        <pattern-item n="nptop"/>
      </pattern>
      <action>
        <call-macro n="f_concord2">
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="2" side="tl" part="lem"/>
                <list n="nptop_amb_detdef"/>
              </in>
            </test>
            <out>
              <chunk name="det-nptop">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="1" side="tl" part="whole"/>
                </lu>
                <b pos="1"/>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="tags"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </when>
          <otherwise>
            <call-macro n="f_bcond">
              <with-param pos="1"/>
              <with-param pos="2"/>
            </call-macro>
            <out>
              <chunk name="nptop">
                <tags>
                  <tag><lit-tag v="SN"/></tag>
                  <tag><clip pos="2" side="tl" part="gen"/></tag>
                  <tag><clip pos="2" side="tl" part="nbr"/></tag>
                  <tag><var n="genero_sl"/></tag>
                  <tag><var n="numero_sl"/></tag>
                </tags>
                <lu>
                  <clip pos="2" side="tl" part="lemh"/>
                  <clip pos="2" side="tl" part="tags"/>
                  <clip pos="2" side="tl" part="lemq"/>
                </lu>
              </chunk>
            </out>
          </otherwise>
        </choose>
      </action>
    </rule>

    <rule comment="REGLA: DETDEF NPTOP ADJ (la Grèce ancienne > la Grècia antica)">
      <pattern>
        <pattern-item n="detdef"/>
        <pattern-item n="nptop"/>
        <pattern-item n="adj"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="3"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="det-nptop-adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="tags"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: DETDEF ADJ NPTOP (l'ancienne Grèce > l'antica Grècia)">
      <pattern>
        <pattern-item n="detdef"/>
        <pattern-item n="adj"/>
        <pattern-item n="nptop"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="3"/>
          <with-param pos="2"/>
          <with-param pos="1"/>
        </call-macro>
        <call-macro n="f_chunk_tags">
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="det-nptop-adj">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="tags"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <!-- FIN REGLAS TOP -->

    <!-- REGLAS DATAS -->

   <rule comment="REGLA: NUMERAL MOIS NUM (20 novembre 1998: 20 de novembre de 1998)">
      <pattern>
        <pattern-item n="num_premier"/>
        <pattern-item n="nom_mois"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord3">
          <with-param pos="2"/>
          <with-param pos="1"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="data">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="lemh"/>
              <clip pos="2" side="tl" part="tags"/>
              <clip pos="2" side="tl" part="lemq"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


   <rule comment="REGLA: DET NUMERAL MOIS NUM (le 20 novembre 1998: lo 20 de novembre de 1998)">
      <pattern>
        <pattern-item n="det"/>
        <pattern-item n="num_premier"/>
        <pattern-item n="nom_mois"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord4">
          <with-param pos="3"/>
          <with-param pos="1"/>
          <with-param pos="2"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="tipus_det">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="data">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="3" side="tl" part="gen"/></tag>
              <tag><clip pos="3" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="lemh"/>
              <clip pos="3" side="tl" part="tags"/>
              <clip pos="3" side="tl" part="lemq"/>
            </lu>
            <b pos="3"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="4" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


   <rule comment="REGLA: MOIS NUM (en novembre 1998: en novembre de 1998)">
      <pattern>
        <pattern-item n="nom_mois"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="data">
            <tags>
              <tag><lit-tag v="SN"/></tag>
              <tag><clip pos="2" side="tl" part="gen"/></tag>
              <tag><clip pos="2" side="tl" part="nbr"/></tag>
              <tag><var n="genero_sl"/></tag>
              <tag><var n="numero_sl"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="1"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


   <rule comment="REGLA: EN MOIS NUM (en en novembre 1998: en novembre de 1998)">
      <pattern>
        <pattern-item n="enprep"/>
        <pattern-item n="nom_mois"/>
        <pattern-item n="num"/>
      </pattern>
      <action>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <out>
          <chunk name="en-data">
            <tags>
              <tag><lit-tag v="SAdv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <clip pos="2" side="tl" part="whole"/>
            </lu>
            <b pos="2"/>
            <lu>
              <lit v="de"/>
              <lit-tag v="pr"/>
            </lu>
            <b/>
            <lu>
              <clip pos="3" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>


    <rule comment="REGLA: il y a X temps > fa X temps">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="y"/>
        <pattern-item n="vbhaver"/>
        <pattern-item n="num"/>
        <pattern-item n="unite_temps"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
         <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_concord2">
          <with-param pos="5"/>
          <with-param pos="4"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="v">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                 <lit v="far"/>
              </get-case-from>
              <lit-tag v="vblex"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <clip pos="4" side="tl" part="lemh"/>
              <clip pos="4" side="tl" part="tags"/>
              <clip pos="4" side="tl" part="lemq"/>
            </lu>
            <b pos="4"/>
            <lu>
              <clip pos="5" side="tl" part="lemh"/>
              <clip pos="5" side="tl" part="tags"/>
              <clip pos="5" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: il y a longtemps > fa temps">
      <pattern>
        <pattern-item n="il"/>
        <pattern-item n="y"/>
        <pattern-item n="vbhaver"/>
        <pattern-item n="longtemps"/>
      </pattern>
      <action>
        <call-macro n="tipus_verb">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="2"/>
          <with-param pos="3"/>
        </call-macro>
        <out>
          <chunk name="v">
            <tags>
              <tag><lit-tag v="SV"/></tag>
              <tag><clip pos="3" side="tl" part="a_verb"/></tag>
              <tag><var n="tipusverb"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                 <lit v="far"/>
              </get-case-from>
              <lit-tag v="vblex"/>
              <clip pos="3" side="tl" part="temps"/>
              <clip pos="3" side="tl" part="pers"/>
              <clip pos="3" side="tl" part="nbr"/>
            </lu>
            <b pos="3"/>
            <lu>
              <get-case-from pos="3">
                <lit v="temps"/>
              </get-case-from>
              <lit-tag v="n.m.sg"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <!-- FIN REGLAS DATAS -->

    <!-- REGLAS CAMBI AUXILIAR -->

    <rule comment="REGLA: HAVER SER_PP > SER + SER_PP: ai été > soi estat">
       <pattern>
         <pattern-item n="vbhaver"/>
         <pattern-item n="vbser_pp"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_concord1">
          <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <lit v="èsser"/>
               <lit-tag v="vbser"/>
               <clip pos="1" side="tl" part="temps"/>
               <clip pos="1" side="tl" part="pers"/>
               <clip pos="1" side="tl" part="nbr"/>
             </lu>
           </chunk>
           <b pos="1"/>
         </out>
         <choose>
            <when>
              <test>
                <or>
                  <equal><clip pos="1" side="tl" part="temps"/><lit-tag v="inf"/></equal>
                  <equal><clip pos="1" side="tl" part="temps"/><lit-tag v="ger"/></equal>
                </or>
              </test>
              <out>
                <chunk name="pp">
                  <tags>
                    <tag><lit-tag v="SA"/></tag>
                    <tag><clip pos="2" side="tl" part="gen"/></tag>
                    <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    <tag><var n="genero_sl"/></tag>
                    <tag><var n="numero_sl"/></tag>
                  </tags>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <lit-tag v="2"/>
                    <lit-tag v="3"/>
                  </lu>
                </chunk>
              </out>
            </when>
            <otherwise>
              <out>
                <chunk name="pp">
                  <tags>
                    <tag><lit-tag v="SA"/></tag>
                    <tag><clip pos="2" side="tl" part="gen"/></tag>
                    <tag><clip pos="1" side="tl" part="nbr"/></tag>
                    <tag><var n="genero_sl"/></tag>
                    <tag><var n="numero_sl"/></tag>
                  </tags>
                  <lu>
                    <clip pos="2" side="tl" part="lemh"/>
                    <clip pos="2" side="tl" part="a_verb"/>
                    <clip pos="2" side="tl" part="temps"/>
                    <lit-tag v="2"/>
                    <lit-tag v="3"/>
                  </lu>
                </chunk>
              </out>
            </otherwise>
         </choose>
       </action>
    </rule>

    <rule comment="REGLA: HAVER SER_PP PP > SER + SER_PP PP: ont été codifiées > son estadas codificadas">
       <pattern>
         <pattern-item n="vbhaver"/>
         <pattern-item n="vbser_pp"/>
         <pattern-item n="pp"/>
       </pattern>
       <action>
         <call-macro n="f_concord2">
          <with-param pos="3"/>
          <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="vbser_pp">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><lit-tag v="normal"/></tag>
             </tags>
             <lu>
               <lit v="èsser"/>
               <lit-tag v="vbser"/>
               <clip pos="1" side="tl" part="temps"/>
               <clip pos="1" side="tl" part="pers"/>
               <clip pos="1" side="tl" part="nbr"/>
             </lu>
             <b pos="1"/>
             <lu>
               <clip pos="2" side="tl" part="lemh"/>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ HAVERconj SER_PP > SER + SER_PP: j'ai été > soi estat">
       <pattern>
        <pattern-item n="prnsubj"/>
         <pattern-item n="vbhaverconj"/>
         <pattern-item n="vbser_pp"/>
       </pattern>
       <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_concord1">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="èsser"/>
               </get-case-from>
               <lit-tag v="vbser"/>
               <clip pos="2" side="tl" part="temps"/>
               <clip pos="2" side="tl" part="pers"/>
               <clip pos="2" side="tl" part="nbr"/>
             </lu>
           </chunk>
           <b pos="2"/>
           <chunk name="pp">
             <tags>
               <tag><lit-tag v="SA"/></tag>
               <tag><clip pos="3" side="tl" part="gen"/></tag>
               <tag><clip pos="2" side="tl" part="nbr"/></tag>
               <tag><var n="genero_sl"/></tag>
               <tag><var n="numero_sl"/></tag>
             </tags>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="a_verb"/>
               <clip pos="3" side="tl" part="temps"/>
               <lit-tag v="2"/>
               <lit-tag v="3"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE HAVER PAS SER_PP > SER PAS SER_PP: n'ai pas été > soi pas estat">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="pas"/>
         <pattern-item n="vbser_pp"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_concord1">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="èsser"/>
               </get-case-from>
               <lit-tag v="vbser"/>
               <clip pos="2" side="tl" part="temps"/>
               <clip pos="2" side="tl" part="pers"/>
               <clip pos="2" side="tl" part="nbr"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="whole"/>
             </lu>
           </chunk>
           <b pos="3"/>
         </out>
         <choose>
            <when>
              <test>
                <or>
                  <equal><clip pos="2" side="tl" part="temps"/><lit-tag v="inf"/></equal>
                  <equal><clip pos="2" side="tl" part="temps"/><lit-tag v="ger"/></equal>
                </or>
              </test>
              <out>
                <chunk name="pp">
                  <tags>
                    <tag><lit-tag v="SA"/></tag>
                    <tag><clip pos="4" side="tl" part="gen"/></tag>
                    <tag><clip pos="4" side="tl" part="nbr"/></tag>
                    <tag><var n="genero_sl"/></tag>
                    <tag><var n="numero_sl"/></tag>
                  </tags>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <lit-tag v="2"/>
                    <lit-tag v="3"/>
                  </lu>
                </chunk>
              </out>
            </when>
            <otherwise>
              <out>
                <chunk name="pp">
                  <tags>
                    <tag><lit-tag v="SA"/></tag>
                    <tag><clip pos="4" side="tl" part="gen"/></tag>
                    <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    <tag><var n="genero_sl"/></tag>
                    <tag><var n="numero_sl"/></tag>
                  </tags>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <lit-tag v="2"/>
                    <lit-tag v="3"/>
                  </lu>
                </chunk>
              </out>
            </otherwise>
         </choose>
       </action>
    </rule>

    <rule comment="REGLA: NE HAVER PAS SER_PP PP > SER PAS SER_PP PP: n'ont pas été codifiées > son pas estadas codificadas">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="pas"/>
         <pattern-item n="vbser_pp"/>
         <pattern-item n="pp"/>
       </pattern>
       <action>
         <call-macro n="f_concord2">
          <with-param pos="5"/>
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="vbser_adv_pp">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><lit-tag v="normal"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="èsser"/>
               </get-case-from>
               <lit-tag v="vbser"/>
               <clip pos="2" side="tl" part="temps"/>
               <clip pos="2" side="tl" part="pers"/>
               <clip pos="2" side="tl" part="nbr"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ NE HAVER PAS SER_PP > SER PAS SER_PP: je n'ai pas été > soi pas estat">
       <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="vbhaverconj"/>
        <pattern-item n="pas"/>
         <pattern-item n="vbser_pp"/>
       </pattern>
       <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_concord1">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="èsser"/>
               </get-case-from>
               <lit-tag v="vbser"/>
               <clip pos="3" side="tl" part="temps"/>
               <clip pos="3" side="tl" part="pers"/>
               <clip pos="3" side="tl" part="nbr"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
           <b pos="4"/>
           <chunk name="pp">
             <tags>
               <tag><lit-tag v="SA"/></tag>
               <tag><clip pos="5" side="tl" part="gen"/></tag>
               <tag><clip pos="3" side="tl" part="nbr"/></tag>
               <tag><var n="genero_sl"/></tag>
               <tag><var n="numero_sl"/></tag>
             </tags>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="a_verb"/>
               <clip pos="5" side="tl" part="temps"/>
               <lit-tag v="2"/>
               <lit-tag v="3"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE HAVER JAMAIS SER_PP > SER PAS JAMAI SER_PP: n'ai jamais été > soi pas jamai estat">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="jamais_plus"/>
         <pattern-item n="vbser_pp"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_concord1">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="èsser"/>
               </get-case-from>
               <lit-tag v="vbser"/>
               <clip pos="2" side="tl" part="temps"/>
               <clip pos="2" side="tl" part="pers"/>
               <clip pos="2" side="tl" part="nbr"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="whole"/>
             </lu>
           </chunk>
           <b pos="3"/>
         </out>
         <choose>
            <when>
              <test>
                <or>
                  <equal><clip pos="2" side="tl" part="temps"/><lit-tag v="inf"/></equal>
                  <equal><clip pos="2" side="tl" part="temps"/><lit-tag v="ger"/></equal>
                </or>
              </test>
              <out>
                <chunk name="pp">
                  <tags>
                    <tag><lit-tag v="SA"/></tag>
                    <tag><clip pos="4" side="tl" part="gen"/></tag>
                    <tag><clip pos="4" side="tl" part="nbr"/></tag>
                    <tag><var n="genero_sl"/></tag>
                    <tag><var n="numero_sl"/></tag>
                  </tags>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <lit-tag v="2"/>
                    <lit-tag v="3"/>
                  </lu>
                </chunk>
              </out>
            </when>
            <otherwise>
              <out>
                <chunk name="pp">
                  <tags>
                    <tag><lit-tag v="SA"/></tag>
                    <tag><clip pos="4" side="tl" part="gen"/></tag>
                    <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    <tag><var n="genero_sl"/></tag>
                    <tag><var n="numero_sl"/></tag>
                  </tags>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <lit-tag v="2"/>
                    <lit-tag v="3"/>
                  </lu>
                </chunk>
              </out>
            </otherwise>
         </choose>
       </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ NE HAVER JAMAIS SER_PP > SER PAS JAMAI SER_PP: je n'ai jamais été > soi pas jamai estat">
       <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="vbhaverconj"/>
        <pattern-item n="jamais_plus"/>
         <pattern-item n="vbser_pp"/>
       </pattern>
       <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_concord1">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="èsser"/>
               </get-case-from>
               <lit-tag v="vbser"/>
               <clip pos="3" side="tl" part="temps"/>
               <clip pos="3" side="tl" part="pers"/>
               <clip pos="3" side="tl" part="nbr"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
           <b pos="4"/>
           <chunk name="pp">
             <tags>
               <tag><lit-tag v="SA"/></tag>
               <tag><clip pos="5" side="tl" part="gen"/></tag>
               <tag><clip pos="3" side="tl" part="nbr"/></tag>
               <tag><var n="genero_sl"/></tag>
               <tag><var n="numero_sl"/></tag>
             </tags>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="a_verb"/>
               <clip pos="5" side="tl" part="temps"/>
               <lit-tag v="2"/>
               <lit-tag v="3"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE HAVER RIEN SER_PP > SER PAS SER_PP RES: n'ai rien été > soi pas estat res">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="rien"/>
         <pattern-item n="vbser_pp"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_concord1">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="èsser"/>
               </get-case-from>
               <lit-tag v="vbser"/>
               <clip pos="2" side="tl" part="temps"/>
               <clip pos="2" side="tl" part="pers"/>
               <clip pos="2" side="tl" part="nbr"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
           </chunk>
           <b pos="2"/>
         </out>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <choose>
            <when>
              <test>
                <or>
                  <equal><clip pos="2" side="tl" part="temps"/><lit-tag v="inf"/></equal>
                  <equal><clip pos="2" side="tl" part="temps"/><lit-tag v="ger"/></equal>
                </or>
              </test>
              <out>
                <chunk name="pp">
                  <tags>
                    <tag><lit-tag v="SA"/></tag>
                    <tag><clip pos="4" side="tl" part="gen"/></tag>
                    <tag><clip pos="4" side="tl" part="nbr"/></tag>
                    <tag><var n="genero_sl"/></tag>
                    <tag><var n="numero_sl"/></tag>
                  </tags>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <lit-tag v="2"/>
                    <lit-tag v="3"/>
                  </lu>
                </chunk>
              </out>
            </when>
            <otherwise>
              <out>
                <chunk name="pp">
                  <tags>
                    <tag><lit-tag v="SA"/></tag>
                    <tag><clip pos="4" side="tl" part="gen"/></tag>
                    <tag><clip pos="2" side="tl" part="nbr"/></tag>
                    <tag><var n="genero_sl"/></tag>
                    <tag><var n="numero_sl"/></tag>
                  </tags>
                  <lu>
                    <clip pos="4" side="tl" part="lemh"/>
                    <clip pos="4" side="tl" part="a_verb"/>
                    <clip pos="4" side="tl" part="temps"/>
                    <lit-tag v="2"/>
                    <lit-tag v="3"/>
                  </lu>
                </chunk>
              </out>
            </otherwise>
         </choose>
         <out>
           <chunk name="prn">
             <tags>
               <tag><lit-tag v="SPron"/></tag>
               <tag><lit-tag v="normal"/></tag>
             </tags>
             <lu>
               <clip pos="3" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ NE HAVER RIEN SER_PP > SER PAS SER_PP RES: je n'ai rien été > soi pas estat res">
       <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="vbhaverconj"/>
        <pattern-item n="rien"/>
         <pattern-item n="vbser_pp"/>
       </pattern>
       <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_concord1">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="èsser"/>
               </get-case-from>
               <lit-tag v="vbser"/>
               <clip pos="3" side="tl" part="temps"/>
               <clip pos="3" side="tl" part="pers"/>
               <clip pos="3" side="tl" part="nbr"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
           </chunk>
           <b pos="3"/>
         </out>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <out>
           <chunk name="pp">
             <tags>
               <tag><lit-tag v="SA"/></tag>
               <tag><clip pos="5" side="tl" part="gen"/></tag>
               <tag><clip pos="3" side="tl" part="nbr"/></tag>
               <tag><var n="genero_sl"/></tag>
               <tag><var n="numero_sl"/></tag>
             </tags>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="a_verb"/>
               <clip pos="5" side="tl" part="temps"/>
               <lit-tag v="2"/>
               <lit-tag v="3"/>
             </lu>
           </chunk>
           <chunk name="prn">
             <tags>
               <tag><lit-tag v="SPron"/></tag>
               <tag><lit-tag v="normal"/></tag>
             </tags>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <!-- FIN REGLAS CAMBI AUXILIAR -->

    <!-- REGLAS ELISION NE -->

    <rule comment="REGLA: NE PAS INF > INF PAS: ne pas manger > manjar pas">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="pas"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="v">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="2" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE JAMAIS INF > INF PAS JAMAI: ne jamais manger > manjar pas jamai">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="jamais_plus"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="v">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="2" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE VBSER > VBSER: Jean n'est pas > Jean es pas">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbser"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="2" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE VBNOSER > VBNOSER: Jean ne dit pas > Jean ditz pas">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbnoser"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="2" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE VBSER JAMAIS > VBSER PAS JAMAI: Jean n'est jamais > Jean es pas jamai">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbser"/>
         <pattern-item n="jamais_plus"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="2" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE VBNOSER JAMAIS > VBNOSER PAS JAMAI: Jean ne dit jamais > Jean ditz pas jamai">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbnoser"/>
         <pattern-item n="jamais_plus_rien_personne"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="2" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
              </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE PRNPRO VBSER > PRNPRO VBSER: Jean n'y est pas > Jean i es pas">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="vbser"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="pro-vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE PRNPRO VBNOSER > PRNPRO VBNOSER: Jean ne lui dit pas > Jean li ditz pas">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="vbnoser"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE PRNPRO VBSER JAMAIS > PRNPRO VBSER PAS JAMAI: Jean n'y est jamais > Jean i es pas jamai">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="vbser"/>
         <pattern-item n="jamais_plus"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="pro-vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE PRNPRO VBNOSER JAMAIS > PRNPRO VBNOSER PAS JAMAI: Jean ne lui dit jamais > Jean li ditz pas jamai">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="vbnoser"/>
         <pattern-item n="jamais_plus_rien"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: PERSONNE NE VERB (personne ne dit: degun ditz pas)">
      <pattern>
        <pattern-item n="personne"/>
        <pattern-item n="ne"/>
        <pattern-item n="verbconj"/>
      </pattern>
      <action>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="prn">
             <tags>
               <tag><lit-tag v="SPron"/></tag>
               <tag><lit-tag v="normal"/></tag>
             </tags>
             <lu>
               <clip pos="1" side="tl" part="lemh"/>
               <clip pos="1" side="tl" part="tags"/>
               <clip pos="1" side="tl" part="lemq"/>
             </lu>
           </chunk>
           <b pos="1"/>
         </out>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: NE VBNOSER PREP PERSONNE/RIEN > VBNOSER PAS PREP DEGUN/RES: Jean ne dit à personne > Jean ditz pas a degun">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbnoser"/>
         <pattern-item n="pr"/>
         <pattern-item n="rien_personne"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="2" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
              </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="whole"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ NE VERB PREP PERSONNE/RIEN > VERB PAS PREP DEGUN/RES: il ne dit à personne > Jean ditz pas a degun">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="verbconj"/>
        <pattern-item n="pr"/>
        <pattern-item n="rien_personne"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: NE AVOIR RIEN PP > AVER PAS PP RES: Jean n'a rien dit > Jean a diz pas res">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="rien"/>
         <pattern-item n="pp_no_ser"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="4" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
              </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="3" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ NE AVOIR RIEN PP > AVER PAS PP RES: il n'a rien dit > a diz pas res">
       <pattern>
         <pattern-item n="prnsubj"/>
         <pattern-item n="ne"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="rien"/>
         <pattern-item n="pp_no_ser"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="5" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
              </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="5" side="tl" part="whole"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE PRNPRO AVOIR RIEN PP > PRNPRO AVER PAS PP RES: Jean ne lui a rien dit > Jean li a diz pas res">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="rien"/>
         <pattern-item n="pp_no_ser"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="5" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
              </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="5" side="tl" part="whole"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ NE PRNPRO AVOIR RIEN PP > PRNPRO AVER PAS PP RES: il ne lui a rien dit > li a diz pas res">
       <pattern>
         <pattern-item n="prnsubj"/>
         <pattern-item n="ne"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="rien"/>
         <pattern-item n="pp_no_ser"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="6" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
              </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
              </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="6" side="tl" part="whole"/>
             </lu>
             <b pos="5"/>
             <lu>
               <clip pos="5" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

  <!-- FIN REGLAS ELISION NE -->

  <!-- REGLAS ELISION SUBJECTE -->

    <rule comment="REGLA: PRNSUBJ VERB (il arrive: arriba)">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="verbconj"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="2" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: VERB PRNSUBJ (penses-tu: pensas)">
      <pattern>
        <pattern-item n="verbconj"/>
        <pattern-item n="prnsubj"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
         <with-param pos="1"/>
        </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="1" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <clip pos="1" side="tl" part="lemh"/>
               <clip pos="1" side="tl" part="tags"/>
               <clip pos="1" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: VERBP3 ON (peut-on: se pòt)">
      <pattern>
        <pattern-item n="verbp3"/>
        <pattern-item n="on"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
         <with-param pos="1"/>
        </call-macro>
        <out>
          <chunk name="prn">
            <tags>
              <tag><lit-tag v="SPron"/></tag>
              <tag><lit-tag v="ref"/></tag>
            </tags>
            <lu>
              <get-case-from pos="1">
                <lit v="se"/>
              </get-case-from>
              <lit-tag v="prn.pro.ref.p3.mf.sp"/>
            </lu>
          </chunk>
          <b/>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="1" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="2">
                 <clip pos="1" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="1" side="tl" part="tags"/>
               <clip pos="1" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: PRNSUBJ PRNPRO VERB (il lui dit: li ditz)">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbconj"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="2"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="pro-verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: Y EN (il y en a: n'i a">
      <pattern>
        <pattern-item n="y"/>
        <pattern-item n="enprn"/>
      </pattern>
      <action>
         <out>
           <chunk name="pro-pro">
             <tags>
               <tag><lit-tag v="SPron"/></tag>
               <tag><lit-tag v="normal"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <get-case-from pos="2">
                 <clip pos="1" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="1" side="tl" part="tags"/>
               <clip pos="1" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: PRNSUBJ PRNPRO PRNPRO VERB (il y en a: n'i a; il le lui dit: o li ditz)">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbconj"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <choose>
           <when>
             <test>
               <and>
                 <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="y"/></equal>
                 <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="en"/></equal>
               </and>
             </test>
             <out>
               <chunk name="pro-pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="3" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="2"/>
                 <lu>
                   <clip pos="2" side="tl" part="lemh"/>
                   <clip pos="2" side="tl" part="tags"/>
                   <clip pos="2" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="4" side="tl" part="lemh"/>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
               </chunk>
             </out>
           </when>
           <otherwise>
             <out>
               <chunk name="pro-pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="2" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="2" side="tl" part="tags"/>
                   <clip pos="2" side="tl" part="lemq"/>
                 </lu>
                 <b pos="2"/>
                 <lu>
                   <clip pos="3" side="tl" part="lemh"/>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="4" side="tl" part="lemh"/>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
               </chunk>
             </out>
           </otherwise>
         </choose>
      </action>
    </rule>


    <rule comment="REGLA: EST-CE QUE PRNPRO PRNSUBJ VERB (est-ce qu'il lui dit: li dits)">
      <pattern>
        <pattern-item n="estceque"/>
        <pattern-item n="prnsubj"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbconj"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="2"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="pro-verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="4" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: EST-CE QUE PRNSUBJ VERB (est-ce qu'il arrive: arriba)">
      <pattern>
        <pattern-item n="estceque"/>
        <pattern-item n="prnsubj"/>
        <pattern-item n="verbconj"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="2"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: PRNSUBJ NE VERB (il ne dit: ditz)">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="verbconj"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: PRNSUBJ NE VERB JAMAIS (il ne dit jamais: ditz pas jamai)">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="verbconj"/>
        <pattern-item n="jamais_plus_rien_personne"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: PRNSUBJ NE PRNPRO VERB (il ne lui dit: li ditz)">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbconj"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="pro-verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="4" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: PRNSUBJ NE PRNPRO VERB JAMAIS (il ne lui dit jamais: li ditz pas jamai)">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbconj"/>
        <pattern-item n="jamais_plus_rien"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="pro-verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="4" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="whole"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>


    <rule comment="REGLA: NE PRNPRO PRNPRO VERB (n'y en a pas: n'i a pas; Jean ne le lui dit pas: Jean o li diguèt pas)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbconj"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <choose>
           <when>
             <test>
               <and>
                 <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="y"/></equal>
                 <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="en"/></equal>
               </and>
             </test>
             <out>
               <chunk name="pro-pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="3" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="2"/>
                 <lu>
                   <clip pos="2" side="tl" part="lemh"/>
                   <clip pos="2" side="tl" part="tags"/>
                   <clip pos="2" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="4" side="tl" part="lemh"/>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
               </chunk>
             </out>
           </when>
           <otherwise>
             <out>
             <chunk name="pro-pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="2" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="2" side="tl" part="tags"/>
                   <clip pos="2" side="tl" part="lemq"/>
                 </lu>
                 <b pos="2"/>
                 <lu>
                   <clip pos="3" side="tl" part="lemh"/>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="4" side="tl" part="lemh"/>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
               </chunk>
             </out>
           </otherwise>
         </choose>
      </action>
    </rule>


    <rule comment="REGLA: NE PRNPRO PRNPRO VERB JAMAIS (n'y en a jamais: n'i a pas jamai; Jean ne le lui dit jamais: Jean o li diguèt pas jamai)">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbconj"/>
        <pattern-item n="jamais_plus_rien"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <choose>
           <when>
             <test>
               <and>
                 <equal caseless="yes"><clip pos="2" side="sl" part="lem"/><lit v="y"/></equal>
                 <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="en"/></equal>
               </and>
             </test>
             <out>
               <chunk name="pro-pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="3" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="2"/>
                 <lu>
                   <clip pos="2" side="tl" part="lemh"/>
                   <clip pos="2" side="tl" part="tags"/>
                   <clip pos="2" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="4" side="tl" part="lemh"/>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
                 <b/>
                 <lu>
                   <lit v="pas"/>
                   <lit-tag v="adv"/>
                 </lu>
                 <b pos="4"/>
                 <lu>
                   <clip pos="5" side="tl" part="whole"/>
                 </lu>
               </chunk>
             </out>
           </when>
           <otherwise>
             <out>
               <chunk name="pro-pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="4" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="2" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="2" side="tl" part="tags"/>
                   <clip pos="2" side="tl" part="lemq"/>
                 </lu>
                 <b pos="2"/>
                 <lu>
                   <clip pos="3" side="tl" part="lemh"/>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="4" side="tl" part="lemh"/>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
                 <b/>
                 <lu>
                   <lit v="pas"/>
                   <lit-tag v="adv"/>
                 </lu>
                 <b pos="4"/>
                 <lu>
                   <clip pos="5" side="tl" part="whole"/>
                 </lu>
               </chunk>
             </out>
           </otherwise>
         </choose>
      </action>
    </rule>


    <rule comment="REGLA: PRNSUBJ NE PRNPRO PRNPRO VERB (il n'y en a pas: n'i a pas; il ne le lui dit pas: o li diguèt pas)">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbconj"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_concord1">
           <with-param pos="4"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <choose>
           <when>
             <test>
               <and>
                 <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="y"/></equal>
                 <equal caseless="yes"><clip pos="4" side="sl" part="lem"/><lit v="en"/></equal>
               </and>
             </test>
             <out>
               <chunk name="pro-pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="4" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="3" side="tl" part="lemh"/>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="4"/>
                 <lu>
                   <clip pos="5" side="tl" part="lemh"/>
                   <clip pos="5" side="tl" part="tags"/>
                   <clip pos="5" side="tl" part="lemq"/>
                 </lu>
               </chunk>
             </out>
           </when>
           <otherwise>
             <out>
             <chunk name="pro-pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="3" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="4" side="tl" part="lemh"/>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
                 <b pos="4"/>
                 <lu>
                   <clip pos="5" side="tl" part="lemh"/>
                   <clip pos="5" side="tl" part="tags"/>
                   <clip pos="5" side="tl" part="lemq"/>
                 </lu>
               </chunk>
             </out>
           </otherwise>
         </choose>
      </action>
    </rule>


    <rule comment="REGLA: PRNSUBJ NE PRNPRO PRNPRO VERB JAMAIS (il n'y en a jamais: n'i a pas jamai; il ne le lui dit jamais: o li diguèt pas jamai)">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="verbconj"/>
        <pattern-item n="jamais_plus_rien"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_concord1">
           <with-param pos="4"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <choose>
           <when>
             <test>
               <and>
                 <equal caseless="yes"><clip pos="3" side="sl" part="lem"/><lit v="y"/></equal>
                 <equal caseless="yes"><clip pos="4" side="sl" part="lem"/><lit v="en"/></equal>
               </and>
             </test>
             <out>
               <chunk name="pro-pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="4" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="3" side="tl" part="lemh"/>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="4"/>
                 <lu>
                   <clip pos="5" side="tl" part="lemh"/>
                   <clip pos="5" side="tl" part="tags"/>
                   <clip pos="5" side="tl" part="lemq"/>
                 </lu>
                 <b/>
                 <lu>
                   <lit v="pas"/>
                   <lit-tag v="adv"/>
                 </lu>
                 <b pos="5"/>
                 <lu>
                   <clip pos="6" side="tl" part="whole"/>
                 </lu>
               </chunk>
             </out>
           </when>
           <otherwise>
             <out>
               <chunk name="pro-pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="5" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="3" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="4" side="tl" part="lemh"/>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
                 <b pos="4"/>
                 <lu>
                   <clip pos="5" side="tl" part="lemh"/>
                   <clip pos="5" side="tl" part="tags"/>
                   <clip pos="5" side="tl" part="lemq"/>
                 </lu>
                 <b/>
                 <lu>
                   <lit v="pas"/>
                   <lit-tag v="adv"/>
                 </lu>
                 <b pos="5"/>
                 <lu>
                   <clip pos="6" side="tl" part="whole"/>
                 </lu>
               </chunk>
             </out>
           </otherwise>
         </choose>
      </action>
    </rule>

  <!-- FIN REGLAS ELISION SUBJECTE -->

  <!-- REGLAS REORDENACION PRONOMS -->

    <rule comment="REGLA: HAVER PP PRNPRO INF (auraient pu l'imaginer: l’aurián pogut imaginar)">
       <pattern>
         <pattern-item n="vbhaver"/>
         <pattern-item n="pp_no_ser"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <out>
           <chunk name="pro-verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="4" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="1"/>
             <lu>
               <get-case-from pos="2">
                 <clip pos="1" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="1" side="tl" part="tags"/>
               <clip pos="1" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="2" side="tl" part="lemh"/>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ HAVER PP PRNPRO INF (ils auraient pu l'imaginer: l’aurián pogut imaginar)">
       <pattern>
         <pattern-item n="prnsubj"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="pp_no_ser"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="f_concord1">
           <with-param pos="4"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="pro-verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="5" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="4" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="2" side="tl" part="lemh"/>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: HAVER ADV PP PRNPRO INF (auraient bien pu l'imaginer: l’aurián fòrça pogut imaginar)">
       <pattern>
         <pattern-item n="vbhaver"/>
         <pattern-item n="adv"/>
         <pattern-item n="pp_no_ser"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="f_concord1">
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <out>
           <chunk name="pro-verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="5" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="4" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
             </lu>
             <b pos="1"/>
             <lu>
               <get-case-from pos="2">
                 <clip pos="1" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="1" side="tl" part="tags"/>
               <clip pos="1" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="2" side="tl" part="lemh"/>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ HAVER ADV PP PRNPRO INF (ils auraient bien pu l'imaginer: l’aurián fòrça pogut imaginar)">
       <pattern>
         <pattern-item n="prnsubj"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="adv"/>
         <pattern-item n="pp_no_ser"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="f_concord1">
           <with-param pos="5"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="pro-verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="6" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="5" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="2" side="tl" part="lemh"/>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
             </lu>
             <b pos="5"/>
             <lu>
               <clip pos="6" side="tl" part="lemh"/>
               <clip pos="6" side="tl" part="tags"/>
               <clip pos="6" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: NE HAVER ADV PP PRNPRO INF (n'auraient pas pu l'imaginer: l’aurián pas pogut imaginar; n'auraient jamais pu l'imaginer: l’aurián pas jamai pogut imaginar)">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbhaver"/>
         <pattern-item n="adv_rien_personne"/>
         <pattern-item n="pp_no_ser"/>
         <pattern-item n="prnpro"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="f_concord1">
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
        <choose>
          <when>
            <test>
              <in caseless="yes">
                <clip pos="3" side="sl" part="lem"/>
                <list n="l_jamais_plus_rien_personne"/>
              </in>
            </test>
             <out>
               <chunk name="pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="5" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="5" side="tl" part="tags"/>
                   <clip pos="5" side="tl" part="lemq"/>
                 </lu>
                 <b pos="2"/>
                 <lu>
                   <clip pos="2" side="tl" part="lemh"/>
                   <clip pos="2" side="tl" part="tags"/>
                   <clip pos="2" side="tl" part="lemq"/>
                 </lu>
                 <b/>
                 <lu>
                   <lit v="pas"/>
                   <lit-tag v="adv"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="3" side="tl" part="lemh"/>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="4"/>
                 <lu>
                   <clip pos="4" side="tl" part="lemh"/>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
                 <b pos="5"/>
                 <lu>
                   <clip pos="6" side="tl" part="lemh"/>
                   <clip pos="6" side="tl" part="tags"/>
                   <clip pos="6" side="tl" part="lemq"/>
                 </lu>
               </chunk>
             </out>
          </when>
          <otherwise>
             <out>
               <chunk name="pro-verb">
                 <tags>
                   <tag><lit-tag v="SV"/></tag>
                   <tag><clip pos="6" side="tl" part="a_verb"/></tag>
                   <tag><var n="tipusverb"/></tag>
                 </tags>
                 <lu>
                   <get-case-from pos="1">
                     <clip pos="5" side="tl" part="lemh"/>
                   </get-case-from>
                   <clip pos="5" side="tl" part="tags"/>
                   <clip pos="5" side="tl" part="lemq"/>
                 </lu>
                 <b pos="2"/>
                 <lu>
                   <clip pos="2" side="tl" part="lemh"/>
                   <clip pos="2" side="tl" part="tags"/>
                   <clip pos="2" side="tl" part="lemq"/>
                 </lu>
                 <b pos="3"/>
                 <lu>
                   <clip pos="3" side="tl" part="lemh"/>
                   <clip pos="3" side="tl" part="tags"/>
                   <clip pos="3" side="tl" part="lemq"/>
                 </lu>
                 <b pos="4"/>
                 <lu>
                   <clip pos="4" side="tl" part="lemh"/>
                   <clip pos="4" side="tl" part="tags"/>
                   <clip pos="4" side="tl" part="lemq"/>
                 </lu>
                 <b pos="5"/>
                 <lu>
                   <clip pos="6" side="tl" part="lemh"/>
                   <clip pos="6" side="tl" part="tags"/>
                   <clip pos="6" side="tl" part="lemq"/>
                 </lu>
               </chunk>
             </out>
          </otherwise>
        </choose>
      </action>
    </rule>

  <!-- FIN REGLAS REORDENACION PRONOMS -->

  <!-- REGLAS EN TRAIN DE -->

    <rule comment="REGLA: être en train de inf = verb-conj: Jean est en train de dormir > Jean dòrm">
      <pattern>
        <pattern-item n="vbser"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="5" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="5" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="5" side="tl" part="a_verb"/>
               <clip pos="1" side="tl" part="temps"/>
               <clip pos="1" side="tl" part="pers"/>
               <clip pos="1" side="tl" part="nbr"/>
               <clip pos="5" side="tl" part="lemq"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: prnsubj être en train de inf = verb-conj: il est en train de dormir > dòrm">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="vbser"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="5"/>
           <with-param pos="6"/>
         </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="6" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="6" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="6" side="tl" part="a_verb"/>
               <clip pos="2" side="tl" part="temps"/>
               <clip pos="2" side="tl" part="pers"/>
               <clip pos="2" side="tl" part="nbr"/>
               <clip pos="6" side="tl" part="lemq"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: être en train de prnpro inf = prnpro verb-conj: est en train de lui dire > li ditz">
      <pattern>
        <pattern-item n="vbser"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="6"/>
         </call-macro>
        <call-macro n="tipus_prn">
          <with-param pos="5"/>
        </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <out>
           <chunk name="prnpro">
             <tags>
               <tag><lit-tag v="SPron"/></tag>
               <tag><var n="tipusprn"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="5" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
             </lu>
           </chunk>
           <b pos="5"/>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="6" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <clip pos="6" side="tl" part="lemh"/>
               <clip pos="6" side="tl" part="a_verb"/>
               <clip pos="1" side="tl" part="temps"/>
               <clip pos="1" side="tl" part="pers"/>
               <clip pos="1" side="tl" part="nbr"/>
               <clip pos="6" side="tl" part="lemq"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: prnsubj être en train de prnpro inf = prnpro verb-conj: il est en train de lui dire > li ditz">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="vbser"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="6"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="7"/>
         </call-macro>
        <call-macro n="tipus_prn">
          <with-param pos="6"/>
        </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="5"/>
           <with-param pos="6"/>
         </call-macro>
         <out>
           <chunk name="prnpro">
             <tags>
               <tag><lit-tag v="SPron"/></tag>
               <tag><var n="tipusprn"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="6" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="6" side="tl" part="tags"/>
               <clip pos="6" side="tl" part="lemq"/>
             </lu>
           </chunk>
           <b pos="6"/>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="7" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <clip pos="7" side="tl" part="lemh"/>
               <clip pos="7" side="tl" part="a_verb"/>
               <clip pos="2" side="tl" part="temps"/>
               <clip pos="2" side="tl" part="pers"/>
               <clip pos="2" side="tl" part="nbr"/>
               <clip pos="7" side="tl" part="lemq"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: ne être pas en train de inf = verb-conj pas: Jean n'est pas en train de dormir > Jean dòrm pas">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="vbser"/>
        <pattern-item n="pas"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="tipus_verb">
          <with-param pos="7"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="5"/>
           <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="6"/>
           <with-param pos="7"/>
         </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="7" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="7" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="7" side="tl" part="a_verb"/>
               <clip pos="2" side="tl" part="temps"/>
               <clip pos="2" side="tl" part="pers"/>
               <clip pos="2" side="tl" part="nbr"/>
               <clip pos="7" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: prnsubj ne être pas en train de inf = verb-conj: il n'est pas en train de dormir > dòrm pas">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="vbser"/>
        <pattern-item n="pas"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="8"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="5"/>
           <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="6"/>
           <with-param pos="7"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="7"/>
           <with-param pos="8"/>
         </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="8" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="8" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="8" side="tl" part="a_verb"/>
               <clip pos="3" side="tl" part="temps"/>
               <clip pos="3" side="tl" part="pers"/>
               <clip pos="3" side="tl" part="nbr"/>
               <clip pos="8" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: ne prnpro être pas en train de inf = verb-conj pas: Jeaj ne lui est pas en train de dire > Jeaj ditz pas">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="vbser"/>
        <pattern-item n="pas"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="2"/>
         </call-macro>
        <call-macro n="tipus_prn">
          <with-param pos="2"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="8"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="prnpro">
             <tags>
               <tag><lit-tag v="SPron"/></tag>
               <tag><var n="tipusprn"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
           </chunk>
           <b pos="2"/>
         </out>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="5"/>
           <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="6"/>
           <with-param pos="7"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="7"/>
           <with-param pos="8"/>
         </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="8" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <clip pos="8" side="tl" part="lemh"/>
               <clip pos="8" side="tl" part="a_verb"/>
               <clip pos="3" side="tl" part="temps"/>
               <clip pos="3" side="tl" part="pers"/>
               <clip pos="3" side="tl" part="nbr"/>
               <clip pos="8" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: prnsubj ne prnpro être pas en train de inf = verb-conj pas: il ne lui est pas en train de dire > li ditz pas">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="vbser"/>
        <pattern-item n="pas"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
        <call-macro n="tipus_prn">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="9"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="prnpro">
             <tags>
               <tag><lit-tag v="SPron"/></tag>
               <tag><var n="tipusprn"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
           </chunk>
           <b pos="3"/>
         </out>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="5"/>
           <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="6"/>
           <with-param pos="7"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="7"/>
           <with-param pos="8"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="8"/>
           <with-param pos="9"/>
         </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="9" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <clip pos="9" side="tl" part="lemh"/>
               <clip pos="9" side="tl" part="a_verb"/>
               <clip pos="4" side="tl" part="temps"/>
               <clip pos="4" side="tl" part="pers"/>
               <clip pos="4" side="tl" part="nbr"/>
               <clip pos="9" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: ne être jamais en train de inf = verb-conj pas jamais: Jean n'est jamais en train de dormir > Jean dòrm pas jamais">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="vbser"/>
        <pattern-item n="jamais_plus"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="tipus_verb">
          <with-param pos="7"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="5"/>
           <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="6"/>
           <with-param pos="7"/>
         </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="7" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="7" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="7" side="tl" part="a_verb"/>
               <clip pos="2" side="tl" part="temps"/>
               <clip pos="2" side="tl" part="pers"/>
               <clip pos="2" side="tl" part="nbr"/>
               <clip pos="7" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b/>
             <lu>
               <clip pos="3" side="tl" part="whole"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: prnsubj ne être jamais en train de inf = verb-conj pas jamais: il n'est jamais en train de dormir > dòrm pas jamais">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="vbser"/>
        <pattern-item n="jamais_plus"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="8"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="5"/>
           <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="6"/>
           <with-param pos="7"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="7"/>
           <with-param pos="8"/>
         </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="8" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="8" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="8" side="tl" part="a_verb"/>
               <clip pos="3" side="tl" part="temps"/>
               <clip pos="3" side="tl" part="pers"/>
               <clip pos="3" side="tl" part="nbr"/>
               <clip pos="8" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: ne prnpro être jamais en train de inf = verb-conj pas jamais: Jean ne lui est jamais en train de dire > Jean ditz pas jamais">
      <pattern>
        <pattern-item n="ne"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="vbser"/>
        <pattern-item n="jamais_plus"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="2"/>
         </call-macro>
        <call-macro n="tipus_prn">
          <with-param pos="2"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="8"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="prnpro">
             <tags>
               <tag><lit-tag v="SPron"/></tag>
               <tag><var n="tipusprn"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
           </chunk>
           <b pos="2"/>
         </out>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="5"/>
           <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="6"/>
           <with-param pos="7"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="7"/>
           <with-param pos="8"/>
         </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="8" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <clip pos="8" side="tl" part="lemh"/>
               <clip pos="8" side="tl" part="a_verb"/>
               <clip pos="3" side="tl" part="temps"/>
               <clip pos="3" side="tl" part="pers"/>
               <clip pos="3" side="tl" part="nbr"/>
               <clip pos="8" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b/>
             <lu>
               <clip pos="4" side="tl" part="whole"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: prnsubj ne prnpro être jamais en train de inf = verb-conj pas jamais: il ne lui est jamais en train de dire > li ditz pas jamai">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="ne"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="vbser"/>
        <pattern-item n="jamais_plus"/>
        <pattern-item n="enprep"/>
        <pattern-item n="train"/>
        <pattern-item n="deprep"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
        <call-macro n="tipus_prn">
          <with-param pos="3"/>
        </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="9"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="prnpro">
             <tags>
               <tag><lit-tag v="SPron"/></tag>
               <tag><var n="tipusprn"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
           </chunk>
           <b pos="3"/>
         </out>
         <call-macro n="f_bcond">
           <with-param pos="4"/>
           <with-param pos="5"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="5"/>
           <with-param pos="6"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="6"/>
           <with-param pos="7"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="7"/>
           <with-param pos="8"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="8"/>
           <with-param pos="9"/>
         </call-macro>
        <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="9" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <clip pos="9" side="tl" part="lemh"/>
               <clip pos="9" side="tl" part="a_verb"/>
               <clip pos="4" side="tl" part="temps"/>
               <clip pos="4" side="tl" part="pers"/>
               <clip pos="4" side="tl" part="nbr"/>
               <clip pos="9" side="tl" part="lemq"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b/>
             <lu>
               <clip pos="5" side="tl" part="whole"/>
             </lu>
           </chunk>
        </out>
      </action>
    </rule>

  <!-- FIN REGLAS EN TRAIN DE -->

  <!-- REGLAS NE... QUE + INF -->

    <rule comment="REGLA: NE VERB QUE INF (ne veut qu'à manger > vòl pas que manjar)">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbnoser"/>
         <pattern-item n="que_cnjsub"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="2" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
              </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="2"/>
             <lu>
               <lit v="que"/>
               <lit-tag v="cnjsub"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: NE VERB QUE PREP INF (ne pense qu'à manger > pensa pas qu'a manjar)">
       <pattern>
         <pattern-item n="ne"/>
         <pattern-item n="vbnoser"/>
         <pattern-item n="que_cnjsub"/>
         <pattern-item n="pr"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="2" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
              </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="2"/>
             <lu>
               <lit v="que"/>
               <lit-tag v="cnjsub"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
              </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ NE VERB QUE INF (il ne veut qu'à manger > vòl pas que manjar)">
       <pattern>
         <pattern-item n="prnsubj"/>
         <pattern-item n="ne"/>
         <pattern-item n="vbnoser"/>
         <pattern-item n="que_cnjsub"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="f_concord0">
           <with-param pos="1"/>
         </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="5"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="3"/>
           <with-param pos="4"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
              </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="3"/>
             <lu>
               <lit v="que"/>
               <lit-tag v="cnjsub"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ NE VERB QUE PREP INF (il ne pense qu'à manger > pensa pas qu'a manjar)">
       <pattern>
         <pattern-item n="prnsubj"/>
         <pattern-item n="ne"/>
         <pattern-item n="vbnoser"/>
         <pattern-item n="que_cnjsub"/>
         <pattern-item n="pr"/>
         <pattern-item n="inf"/>
       </pattern>
       <action>
         <call-macro n="f_concord0">
           <with-param pos="1"/>
         </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="6"/>
         </call-macro>
         <call-macro n="neg_imp">
          <with-param pos="3"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
              </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="3"/>
             <lu>
               <lit v="que"/>
               <lit-tag v="cnjsub"/>
             </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
              </lu>
             <b pos="5"/>
             <lu>
               <clip pos="6" side="tl" part="lemh"/>
               <clip pos="6" side="tl" part="tags"/>
               <clip pos="6" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
       </action>
    </rule>

  <!-- FIN REGLAS NE... QUE + INF -->

  <!-- AUTRAS REGLAS VERBALAS -->

    <rule comment="REGLA: IMP PRNENC">
       <pattern>
         <pattern-item n="verb"/>
         <pattern-item n="prnenc"/>
       </pattern>
       <action>
         <out>
           <chunk name="v_enc">
             <tags>
               <tag><lit-tag v="SV"/></tag>
             </tags>
             <mlu>
               <lu>
                 <clip pos="1" side="tl" part="lemh"/>
                 <clip pos="1" side="tl" part="a_verb"/>
                 <clip pos="1" side="tl" part="temps"/>
                 <clip pos="1" side="tl" part="pers"/>
                 <clip pos="1" side="tl" part="nbr"/>
                 <clip pos="1" side="tl" part="lemq"/>
               </lu>
               <lu>
                 <clip pos="2" side="tl" part="lemh"/>
                 <clip pos="2" side="tl" part="tags"/>
                 <clip pos="2" side="tl" part="lemq"/>
               </lu>
             </mlu>
           </chunk>
         </out>
       </action>
    </rule>

  <!-- FIN AUTRAS REGLAS VERBALAS -->

  <!-- REGLAS C'EST -->

    <rule comment="REGLA: CE VBSER: ce fut > foguèt">
       <pattern>
         <pattern-item n="ce"/>
         <pattern-item n="vbser"/>
       </pattern>
       <action>
        <call-macro n="f_concord1">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="tipus_verb">
          <with-param pos="2"/>
        </call-macro>
        <call-macro n="f_bcond">
          <with-param pos="1"/>
          <with-param pos="2"/>
        </call-macro>
         <out>
           <chunk name="vbser">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><lit-tag v="vbser"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

  <!-- FIN REGLAS C'EST -->

  <!-- REGLAS VBMOD + PRO + VBMOD -->

    <rule comment="REGLA: VBMOD PRNPRO VERB (Cet article peut se lire > Aqueste article se pòt legir)">
      <pattern>
        <pattern-item n="vbmod"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="pro-vbmod-inf">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="2" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
             </lu>
             <b pos="1"/>
             <lu>
               <clip pos="1" side="tl" part="lemh"/>
               <clip pos="1" side="tl" part="tags"/>
               <clip pos="1" side="tl" part="lemq"/>
              </lu>
             <b pos="2"/>
             <lu>
               <clip pos="3" side="tl" part="lemh"/>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: PRNSUBJ VBMOD PRNPRO VERB (Il peut se lire > Se pòt legir)">
      <pattern>
        <pattern-item n="prnsubj"/>
        <pattern-item n="vbmod"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="pro-vbmod-inf">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="4" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <clip pos="2" side="tl" part="lemh"/>
               <clip pos="2" side="tl" part="tags"/>
               <clip pos="2" side="tl" part="lemq"/>
              </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: ON DOIT (on doit: cal)">
      <pattern>
        <pattern-item n="on"/>
        <pattern-item n="devoirp3sg"/>
      </pattern>
      <action>
         <call-macro n="f_concord0">
           <with-param pos="1"/>
         </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="2" side="tl" part="a_verb"/></tag>
               <tag><lit-tag v="normal"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="caler"/>
               </get-case-from>
               <clip pos="2" side="tl" part="tags"/>
              </lu>
           </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: ON DOIT PRNPRO VERB (On doit le lire > Lo cal legir)">
      <pattern>
        <pattern-item n="on"/>
        <pattern-item n="devoirp3sg"/>
        <pattern-item n="prnpro"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
         <call-macro n="f_concord1">
           <with-param pos="3"/>
         </call-macro>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="pro-vbmod-inf">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="4" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <clip pos="3" side="tl" part="lemh"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
               <clip pos="3" side="tl" part="lemq"/>
             </lu>
             <b pos="2"/>
             <lu>
               <lit v="caler"/>
               <clip pos="2" side="tl" part="tags"/>
              </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: ON NE DOIT PAS VERB (On ne doit pas lire > Cal pas legir)">
      <pattern>
        <pattern-item n="on"/>
        <pattern-item n="ne"/>
        <pattern-item n="devoirp3sg"/>
        <pattern-item n="pas"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="pro-vbmod-inf">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="5" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="caler"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
              </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
      </action>
    </rule>

    <rule comment="REGLA: ON NE DOIT JAMAIS VERB (On ne doit jamais lire > Cal pas jamai legir)">
      <pattern>
        <pattern-item n="on"/>
        <pattern-item n="ne"/>
        <pattern-item n="devoirp3sg"/>
        <pattern-item n="jamais_plus_rien_personne"/>
        <pattern-item n="inf"/>
      </pattern>
      <action>
        <call-macro n="f_concord0">
          <with-param pos="1"/>
        </call-macro>
         <call-macro n="tipus_verb">
          <with-param pos="4"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <call-macro n="f_bcond">
           <with-param pos="2"/>
           <with-param pos="3"/>
         </call-macro>
         <out>
           <chunk name="pro-vbmod-inf">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="5" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="caler"/>
               </get-case-from>
               <clip pos="3" side="tl" part="tags"/>
             </lu>
             <b/>
             <lu>
               <lit v="pas"/>
               <lit-tag v="adv"/>
             </lu>
             <b pos="3"/>
             <lu>
               <clip pos="4" side="tl" part="lemh"/>
               <clip pos="4" side="tl" part="tags"/>
               <clip pos="4" side="tl" part="lemq"/>
              </lu>
             <b pos="4"/>
             <lu>
               <clip pos="5" side="tl" part="lemh"/>
               <clip pos="5" side="tl" part="tags"/>
               <clip pos="5" side="tl" part="lemq"/>
              </lu>
           </chunk>
         </out>
      </action>
    </rule>

  <!-- FIN REGLAS VBMOD + PRO + VBMOD -->

    <rule comment="REGLA: EST-CE QUE > 0">
       <pattern>
         <pattern-item n="estceque"/>
       </pattern>
       <action>
       </action>
    </rule>

    <rule comment="REGLA: ADVITG EST-CE QUE > ADVITG">
       <pattern>
         <pattern-item n="advitg"/>
         <pattern-item n="estceque"/>
       </pattern>
       <action>
        <out>
          <chunk name="advitg">
            <tags>
              <tag><lit-tag v="SAdv"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="lemh"/>
              <clip pos="1" side="tl" part="tags"/>
              <clip pos="1" side="tl" part="lemq"/>
            </lu>
          </chunk>
        </out>
        <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
        </call-macro>
       </action>
    </rule>

    <rule comment="REGLA: IL EN FAIT > en fa (pedaç per evitar il + ´en fa' (adv) ">
       <pattern>
         <pattern-item n="il_elle"/>
         <pattern-item n="en_fait"/>
       </pattern>
       <action>
         <call-macro n="f_bcond">
           <with-param pos="1"/>
           <with-param pos="2"/>
         </call-macro>
         <out>
           <chunk name="pro-verb">
             <tags>
               <tag><lit-tag v="SV"/></tag>
               <tag><clip pos="3" side="tl" part="a_verb"/></tag>
               <tag><var n="tipusverb"/></tag>
             </tags>
             <lu>
               <get-case-from pos="1">
                 <lit v="en"/>
               </get-case-from>
              <lit-tag v="prn.pro.adv"/>
             </lu>
             <b/>
             <lu>
              <lit v="far"/>
              <lit-tag v="vblex.pri.p3.sg"/>
             </lu>
           </chunk>
         </out>
       </action>
    </rule>

    <rule comment="REGLA: LPAR">
      <pattern>
        <pattern-item n="lpar"/>
      </pattern>
      <action>
        <out>
          <chunk name="lpar">
            <tags>
              <tag><lit-tag v="LPAR"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: RPAR">
      <pattern>
        <pattern-item n="rpar"/>
      </pattern>
      <action>
        <out>
          <chunk name="rpar">
            <tags>
              <tag><lit-tag v="RPAR"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: CM">
      <pattern>
        <pattern-item n="cm"/>
      </pattern>
      <action>
        <out>
          <chunk name="cm">
            <tags>
              <tag><lit-tag v="CM"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

    <rule comment="REGLA: SENT">
      <pattern>
        <pattern-item n="sent"/>
      </pattern>
      <action>
        <out>
          <chunk name="sent" case="caseFirstWord">
            <tags>
              <tag><lit-tag v="SENT"/></tag>
            </tags>
            <lu>
              <clip pos="1" side="tl" part="whole"/>
            </lu>
          </chunk>
        </out>
      </action>
    </rule>

  </section-rules>


</transfer>

<!--
Resources:
    http://wiki.apertium.org/wiki/Chunking:_A_full_example
    http://wiki.apertium.org/wiki/Chunking
    http://wiki.apertium.org/wiki/Apertium_New_Language_Pair_HOWTO#Transfer_rules
    http://wiki.apertium.org/wiki/A_long_introduction_to_transfer_rules
    http://wiki.apertium.org/wiki/Transfer#Adding_structural_transfer_.28grammar.29_rules
-->

